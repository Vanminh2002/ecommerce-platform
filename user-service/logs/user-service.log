2025-08-04T08:59:08.872+07:00  INFO 17364 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.12 with PID 17364 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T08:59:08.881+07:00  INFO 17364 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T08:59:11.052+07:00  INFO 17364 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T08:59:11.054+07:00  INFO 17364 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T08:59:11.121+07:00  INFO 17364 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T08:59:11.283+07:00  INFO 17364 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T08:59:11.510+07:00  INFO 17364 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@76b2687b
2025-08-04T08:59:11.513+07:00  INFO 17364 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T08:59:11.758+07:00  INFO 17364 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T08:59:12.211+07:00  INFO 17364 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T08:59:12.300+07:00  INFO 17364 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T08:59:12.301+07:00  INFO 17364 --- [restartedMain] liquibase.command                        : Using deploymentId: 4272752301
2025-08-04T08:59:12.304+07:00  INFO 17364 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T08:59:12.312+07:00  INFO 17364 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::create-role-with-permission-v2::wabi
2025-08-04T08:59:12.343+07:00 ERROR 17364 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::create-role-with-permission-v2::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T08:59:12.360+07:00  INFO 17364 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T08:59:12.360+07:00  INFO 17364 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T08:59:12.360+07:00  INFO 17364 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T08:59:12.361+07:00  INFO 17364 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T08:59:12.361+07:00  INFO 17364 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T08:59:12.361+07:00  INFO 17364 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T08:59:12.363+07:00  INFO 17364 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T08:59:12.366+07:00  INFO 17364 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T08:59:12.369+07:00  INFO 17364 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T08:59:12.371+07:00  INFO 17364 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T08:59:12.372+07:00  INFO 17364 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T08:59:12.372+07:00  INFO 17364 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T08:59:12.372+07:00  INFO 17364 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
2025-08-04T08:59:12.372+07:00  INFO 17364 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T08:59:12.372+07:00  INFO 17364 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T08:59:12.374+07:00  WARN 17364 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
2025-08-04T08:59:12.374+07:00  INFO 17364 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T08:59:12.471+07:00  INFO 17364 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T08:59:12.475+07:00  INFO 17364 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T08:59:12.519+07:00 ERROR 17364 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T08:59:36.416+07:00  INFO 5612 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 5612 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T08:59:36.419+07:00  INFO 5612 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T08:59:39.406+07:00  INFO 5612 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T08:59:39.406+07:00  INFO 5612 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T08:59:39.500+07:00  INFO 5612 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T08:59:39.691+07:00  INFO 5612 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T08:59:39.949+07:00  INFO 5612 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@636eb173
2025-08-04T08:59:39.951+07:00  INFO 5612 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T08:59:40.183+07:00  INFO 5612 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T08:59:40.602+07:00  INFO 5612 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T08:59:40.673+07:00  INFO 5612 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T08:59:40.674+07:00  INFO 5612 --- [restartedMain] liquibase.command                        : Using deploymentId: 4272780674
2025-08-04T08:59:40.676+07:00  INFO 5612 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T08:59:40.684+07:00  INFO 5612 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::create-role-with-permission-v2::wabi
2025-08-04T08:59:40.712+07:00 ERROR 5612 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::create-role-with-permission-v2::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T08:59:40.730+07:00  INFO 5612 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T08:59:40.730+07:00  INFO 5612 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T08:59:40.730+07:00  INFO 5612 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T08:59:40.730+07:00  INFO 5612 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T08:59:40.730+07:00  INFO 5612 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T08:59:40.730+07:00  INFO 5612 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T08:59:40.732+07:00  INFO 5612 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T08:59:40.735+07:00  INFO 5612 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T08:59:40.739+07:00  INFO 5612 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T08:59:40.741+07:00  INFO 5612 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T08:59:40.742+07:00  INFO 5612 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T08:59:40.742+07:00  INFO 5612 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T08:59:40.742+07:00  INFO 5612 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
2025-08-04T08:59:40.742+07:00  INFO 5612 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T08:59:40.742+07:00  INFO 5612 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T08:59:40.744+07:00  WARN 5612 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
2025-08-04T08:59:40.744+07:00  INFO 5612 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T08:59:40.942+07:00  INFO 5612 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T08:59:40.946+07:00  INFO 5612 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T08:59:40.995+07:00 ERROR 5612 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:00:12.031+07:00  INFO 8280 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 8280 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:00:12.034+07:00  INFO 8280 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:00:13.889+07:00  INFO 8280 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:00:13.890+07:00  INFO 8280 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:00:13.957+07:00  INFO 8280 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:00:14.149+07:00  INFO 8280 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:00:14.378+07:00  INFO 8280 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@17324cc
2025-08-04T09:00:14.380+07:00  INFO 8280 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:00:14.587+07:00  INFO 8280 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:00:15.008+07:00  INFO 8280 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:00:15.076+07:00  INFO 8280 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T09:00:15.078+07:00  INFO 8280 --- [restartedMain] liquibase.command                        : Using deploymentId: 4272815077
2025-08-04T09:00:15.080+07:00  INFO 8280 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:00:15.087+07:00  INFO 8280 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::create-role-with-permission-v2::wabi
2025-08-04T09:00:15.116+07:00 ERROR 8280 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::create-role-with-permission-v2::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:00:15.133+07:00  INFO 8280 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T09:00:15.133+07:00  INFO 8280 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T09:00:15.133+07:00  INFO 8280 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T09:00:15.133+07:00  INFO 8280 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T09:00:15.133+07:00  INFO 8280 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T09:00:15.133+07:00  INFO 8280 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T09:00:15.134+07:00  INFO 8280 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T09:00:15.137+07:00  INFO 8280 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T09:00:15.140+07:00  INFO 8280 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T09:00:15.142+07:00  INFO 8280 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:00:15.143+07:00  INFO 8280 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:00:15.143+07:00  INFO 8280 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T09:00:15.143+07:00  INFO 8280 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
2025-08-04T09:00:15.143+07:00  INFO 8280 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T09:00:15.143+07:00  INFO 8280 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:00:15.145+07:00  WARN 8280 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
2025-08-04T09:00:15.145+07:00  INFO 8280 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:00:15.256+07:00  INFO 8280 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:00:15.260+07:00  INFO 8280 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:00:15.311+07:00 ERROR 8280 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:01:17.131+07:00  INFO 7320 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 7320 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:01:17.134+07:00  INFO 7320 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:01:19.062+07:00  INFO 7320 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:01:19.062+07:00  INFO 7320 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:01:19.127+07:00  INFO 7320 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:01:19.288+07:00  INFO 7320 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:01:19.609+07:00  INFO 7320 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5d52e2a1
2025-08-04T09:01:19.611+07:00  INFO 7320 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:01:19.825+07:00  INFO 7320 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:01:20.269+07:00  INFO 7320 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:01:20.302+07:00  INFO 7320 --- [restartedMain] liquibase.changelog                      : Change failed validation!
2025-08-04T09:01:20.305+07:00  INFO 7320 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:01:20.305+07:00  INFO 7320 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:01:20.305+07:00  INFO 7320 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ValidationFailedException
2025-08-04T09:01:20.306+07:00  INFO 7320 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

2025-08-04T09:01:20.306+07:00  INFO 7320 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T09:01:20.306+07:00  INFO 7320 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:01:20.308+07:00  WARN 7320 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

2025-08-04T09:01:20.308+07:00  INFO 7320 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:01:20.508+07:00  INFO 7320 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:01:20.511+07:00  INFO 7320 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:01:20.556+07:00 ERROR 7320 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at liquibase.changelog.DatabaseChangeLog.validate(DatabaseChangeLog.java:358) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:92) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T09:01:58.272+07:00  INFO 16592 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 16592 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:01:58.275+07:00  INFO 16592 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:02:00.139+07:00  INFO 16592 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:02:00.139+07:00  INFO 16592 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:02:00.203+07:00  INFO 16592 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:02:00.362+07:00  INFO 16592 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:02:00.571+07:00  INFO 16592 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@62838325
2025-08-04T09:02:00.573+07:00  INFO 16592 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:02:00.780+07:00  INFO 16592 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:02:01.196+07:00  INFO 16592 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:02:01.270+07:00  INFO 16592 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T09:02:01.272+07:00  INFO 16592 --- [restartedMain] liquibase.command                        : Using deploymentId: 4272921271
2025-08-04T09:02:01.279+07:00  INFO 16592 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:02:01.287+07:00  INFO 16592 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::create-role-with-permission-v2::wabi
2025-08-04T09:02:01.314+07:00 ERROR 16592 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::create-role-with-permission-v2::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:02:01.329+07:00  INFO 16592 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T09:02:01.330+07:00  INFO 16592 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T09:02:01.330+07:00  INFO 16592 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T09:02:01.330+07:00  INFO 16592 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T09:02:01.330+07:00  INFO 16592 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T09:02:01.330+07:00  INFO 16592 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T09:02:01.331+07:00  INFO 16592 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T09:02:01.334+07:00  INFO 16592 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T09:02:01.337+07:00  INFO 16592 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T09:02:01.340+07:00  INFO 16592 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:02:01.340+07:00  INFO 16592 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:02:01.340+07:00  INFO 16592 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T09:02:01.340+07:00  INFO 16592 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
2025-08-04T09:02:01.341+07:00  INFO 16592 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T09:02:01.341+07:00  INFO 16592 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:02:01.342+07:00  WARN 16592 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
2025-08-04T09:02:01.343+07:00  INFO 16592 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:02:01.447+07:00  INFO 16592 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:02:01.450+07:00  INFO 16592 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:02:01.494+07:00 ERROR 16592 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:03:10.797+07:00  INFO 3916 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 3916 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:03:10.800+07:00  INFO 3916 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:03:12.668+07:00  INFO 3916 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:03:12.668+07:00  INFO 3916 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:03:12.734+07:00  INFO 3916 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:03:12.890+07:00  INFO 3916 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:03:13.097+07:00  INFO 3916 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@17a469f8
2025-08-04T09:03:13.099+07:00  INFO 3916 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:03:13.341+07:00  INFO 3916 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:03:14.137+07:00  INFO 3916 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:03:14.228+07:00  INFO 3916 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T09:03:14.231+07:00  INFO 3916 --- [restartedMain] liquibase.command                        : Using deploymentId: 4272994230
2025-08-04T09:03:14.235+07:00  INFO 3916 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:03:14.248+07:00  INFO 3916 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::create-role-with-permission-v2::wabi
2025-08-04T09:03:14.294+07:00 ERROR 3916 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::create-role-with-permission-v2::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:03:14.312+07:00  INFO 3916 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T09:03:14.312+07:00  INFO 3916 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T09:03:14.312+07:00  INFO 3916 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T09:03:14.312+07:00  INFO 3916 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T09:03:14.312+07:00  INFO 3916 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T09:03:14.312+07:00  INFO 3916 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T09:03:14.314+07:00  INFO 3916 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T09:03:14.317+07:00  INFO 3916 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T09:03:14.321+07:00  INFO 3916 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T09:03:14.323+07:00  INFO 3916 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:03:14.323+07:00  INFO 3916 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:03:14.323+07:00  INFO 3916 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T09:03:14.324+07:00  INFO 3916 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
2025-08-04T09:03:14.324+07:00  INFO 3916 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T09:03:14.324+07:00  INFO 3916 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:03:14.326+07:00  WARN 3916 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
2025-08-04T09:03:14.326+07:00  INFO 3916 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:03:14.359+07:00  INFO 3916 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:03:14.362+07:00  INFO 3916 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:03:14.399+07:00 ERROR 3916 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:04:47.376+07:00  INFO 15172 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.12 with PID 15172 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:04:47.379+07:00  INFO 15172 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:04:49.595+07:00  INFO 15172 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:04:49.597+07:00  INFO 15172 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:04:49.663+07:00  INFO 15172 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:04:49.822+07:00  INFO 15172 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:04:50.032+07:00  INFO 15172 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7fbbcfe1
2025-08-04T09:04:50.034+07:00  INFO 15172 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:04:50.233+07:00  INFO 15172 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:04:50.658+07:00  INFO 15172 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:04:50.734+07:00  INFO 15172 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T09:04:50.735+07:00  INFO 15172 --- [restartedMain] liquibase.command                        : Using deploymentId: 4273090735
2025-08-04T09:04:50.737+07:00  INFO 15172 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:04:50.745+07:00  INFO 15172 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::create-role-with-permission-v2::wabi
2025-08-04T09:04:50.775+07:00 ERROR 15172 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::create-role-with-permission-v2::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:04:50.794+07:00  INFO 15172 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T09:04:50.795+07:00  INFO 15172 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T09:04:50.795+07:00  INFO 15172 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T09:04:50.796+07:00  INFO 15172 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T09:04:50.796+07:00  INFO 15172 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T09:04:50.796+07:00  INFO 15172 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T09:04:50.797+07:00  INFO 15172 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T09:04:50.801+07:00  INFO 15172 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T09:04:50.804+07:00  INFO 15172 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T09:04:50.807+07:00  INFO 15172 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:04:50.807+07:00  INFO 15172 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:04:50.807+07:00  INFO 15172 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T09:04:50.807+07:00  INFO 15172 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
2025-08-04T09:04:50.808+07:00  INFO 15172 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T09:04:50.808+07:00  INFO 15172 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:04:50.809+07:00  WARN 15172 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
2025-08-04T09:04:50.810+07:00  INFO 15172 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:04:50.907+07:00  INFO 15172 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:04:50.910+07:00  INFO 15172 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:04:50.951+07:00 ERROR 15172 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:05:32.586+07:00  INFO 12740 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 12740 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:05:32.591+07:00  INFO 12740 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:05:35.567+07:00  INFO 12740 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:05:35.567+07:00  INFO 12740 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:05:35.637+07:00  INFO 12740 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:05:35.843+07:00  INFO 12740 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:05:36.077+07:00  INFO 12740 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@588fe97b
2025-08-04T09:05:36.079+07:00  INFO 12740 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:05:36.353+07:00  INFO 12740 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:05:36.874+07:00  INFO 12740 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:05:37.018+07:00  INFO 12740 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T09:05:37.020+07:00  INFO 12740 --- [restartedMain] liquibase.command                        : Using deploymentId: 4273137020
2025-08-04T09:05:37.023+07:00  INFO 12740 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:05:37.035+07:00  INFO 12740 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::create-role-with-permission-v2::wabi
2025-08-04T09:05:37.082+07:00 ERROR 12740 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::create-role-with-permission-v2::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:05:37.105+07:00  INFO 12740 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T09:05:37.105+07:00  INFO 12740 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T09:05:37.106+07:00  INFO 12740 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T09:05:37.106+07:00  INFO 12740 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T09:05:37.106+07:00  INFO 12740 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T09:05:37.106+07:00  INFO 12740 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T09:05:37.107+07:00  INFO 12740 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T09:05:37.111+07:00  INFO 12740 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T09:05:37.114+07:00  INFO 12740 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T09:05:37.117+07:00  INFO 12740 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:05:37.117+07:00  INFO 12740 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:05:37.117+07:00  INFO 12740 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T09:05:37.117+07:00  INFO 12740 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
2025-08-04T09:05:37.118+07:00  INFO 12740 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T09:05:37.118+07:00  INFO 12740 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:05:37.119+07:00  WARN 12740 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
2025-08-04T09:05:37.120+07:00  INFO 12740 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:05:37.123+07:00  INFO 12740 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:05:37.128+07:00  INFO 12740 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:05:37.166+07:00 ERROR 12740 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:08:16.149+07:00  INFO 13328 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 13328 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:08:16.154+07:00  INFO 13328 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:08:19.443+07:00  INFO 13328 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:08:19.444+07:00  INFO 13328 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:08:19.555+07:00  INFO 13328 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:08:19.835+07:00  INFO 13328 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:08:20.306+07:00  INFO 13328 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@b5b2003
2025-08-04T09:08:20.309+07:00  INFO 13328 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:08:20.705+07:00  INFO 13328 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:08:21.416+07:00  INFO 13328 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:08:21.519+07:00  INFO 13328 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T09:08:21.522+07:00  INFO 13328 --- [restartedMain] liquibase.command                        : Using deploymentId: 4273301521
2025-08-04T09:08:21.526+07:00  INFO 13328 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:08:21.536+07:00  INFO 13328 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::create-role-with-permission-v2::wabi
2025-08-04T09:08:21.584+07:00 ERROR 13328 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::create-role-with-permission-v2::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:08:21.606+07:00  INFO 13328 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T09:08:21.606+07:00  INFO 13328 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T09:08:21.606+07:00  INFO 13328 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T09:08:21.606+07:00  INFO 13328 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T09:08:21.607+07:00  INFO 13328 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T09:08:21.607+07:00  INFO 13328 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T09:08:21.609+07:00  INFO 13328 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T09:08:21.612+07:00  INFO 13328 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T09:08:21.616+07:00  INFO 13328 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T09:08:21.619+07:00  INFO 13328 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:08:21.619+07:00  INFO 13328 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:08:21.619+07:00  INFO 13328 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T09:08:21.619+07:00  INFO 13328 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
2025-08-04T09:08:21.620+07:00  INFO 13328 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T09:08:21.620+07:00  INFO 13328 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:08:21.622+07:00  WARN 13328 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
2025-08-04T09:08:21.622+07:00  INFO 13328 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:08:21.626+07:00  INFO 13328 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:08:21.633+07:00  INFO 13328 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:08:21.705+07:00 ERROR 13328 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:09:29.997+07:00  INFO 12004 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 12004 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:09:30.000+07:00  INFO 12004 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:09:32.441+07:00  INFO 12004 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:09:32.442+07:00  INFO 12004 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:09:32.537+07:00  INFO 12004 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:09:32.724+07:00  INFO 12004 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:09:32.949+07:00  INFO 12004 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@42423e19
2025-08-04T09:09:32.951+07:00  INFO 12004 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:09:33.160+07:00  INFO 12004 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:09:33.610+07:00  INFO 12004 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:09:33.699+07:00  INFO 12004 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T09:09:33.701+07:00  INFO 12004 --- [restartedMain] liquibase.command                        : Using deploymentId: 4273373701
2025-08-04T09:09:33.703+07:00  INFO 12004 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:09:33.710+07:00  INFO 12004 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::create-role-with-permission-v2::wabi
2025-08-04T09:09:33.738+07:00 ERROR 12004 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::create-role-with-permission-v2::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:09:33.758+07:00  INFO 12004 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T09:09:33.758+07:00  INFO 12004 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T09:09:33.758+07:00  INFO 12004 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T09:09:33.758+07:00  INFO 12004 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T09:09:33.758+07:00  INFO 12004 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T09:09:33.758+07:00  INFO 12004 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T09:09:33.760+07:00  INFO 12004 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T09:09:33.762+07:00  INFO 12004 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T09:09:33.765+07:00  INFO 12004 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T09:09:33.768+07:00  INFO 12004 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:09:33.768+07:00  INFO 12004 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:09:33.768+07:00  INFO 12004 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T09:09:33.768+07:00  INFO 12004 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
2025-08-04T09:09:33.769+07:00  INFO 12004 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T09:09:33.769+07:00  INFO 12004 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:09:33.771+07:00  WARN 12004 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
2025-08-04T09:09:33.771+07:00  INFO 12004 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:09:33.851+07:00  INFO 12004 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:09:33.856+07:00  INFO 12004 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:09:33.897+07:00 ERROR 12004 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:10:46.242+07:00  INFO 9332 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 9332 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:10:46.244+07:00  INFO 9332 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:10:48.511+07:00  INFO 9332 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:10:48.511+07:00  INFO 9332 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:10:48.588+07:00  INFO 9332 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:10:48.794+07:00  INFO 9332 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:10:49.249+07:00  INFO 9332 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@553ece76
2025-08-04T09:10:49.252+07:00  INFO 9332 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:10:49.701+07:00  INFO 9332 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:10:50.283+07:00  INFO 9332 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:10:50.363+07:00  INFO 9332 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T09:10:50.367+07:00  INFO 9332 --- [restartedMain] liquibase.command                        : Using deploymentId: 4273450367
2025-08-04T09:10:50.370+07:00  INFO 9332 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:10:50.380+07:00  INFO 9332 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::create-role-with-permission-v2::wabi
2025-08-04T09:10:50.407+07:00 ERROR 9332 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::create-role-with-permission-v2::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:10:50.422+07:00  INFO 9332 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T09:10:50.422+07:00  INFO 9332 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T09:10:50.422+07:00  INFO 9332 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T09:10:50.422+07:00  INFO 9332 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T09:10:50.423+07:00  INFO 9332 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T09:10:50.423+07:00  INFO 9332 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T09:10:50.424+07:00  INFO 9332 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T09:10:50.427+07:00  INFO 9332 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T09:10:50.430+07:00  INFO 9332 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T09:10:50.432+07:00  INFO 9332 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:10:50.432+07:00  INFO 9332 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:10:50.432+07:00  INFO 9332 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T09:10:50.432+07:00  INFO 9332 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
2025-08-04T09:10:50.433+07:00  INFO 9332 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T09:10:50.433+07:00  INFO 9332 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:10:50.434+07:00  WARN 9332 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
2025-08-04T09:10:50.435+07:00  INFO 9332 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:10:50.438+07:00  INFO 9332 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:10:50.444+07:00  INFO 9332 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:10:50.488+07:00 ERROR 9332 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:13:17.822+07:00  INFO 9928 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 9928 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:13:17.825+07:00  INFO 9928 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:13:19.846+07:00  INFO 9928 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:13:19.846+07:00  INFO 9928 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:13:19.911+07:00  INFO 9928 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:13:20.067+07:00  INFO 9928 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:13:20.274+07:00  INFO 9928 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@32efacc3
2025-08-04T09:13:20.276+07:00  INFO 9928 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:13:20.501+07:00  INFO 9928 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:13:20.933+07:00  INFO 9928 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:13:20.979+07:00  INFO 9928 --- [restartedMain] liquibase.changelog                      : Change failed validation!
2025-08-04T09:13:20.983+07:00  INFO 9928 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:13:20.984+07:00  INFO 9928 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:13:20.984+07:00  INFO 9928 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ValidationFailedException
2025-08-04T09:13:20.984+07:00  INFO 9928 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

2025-08-04T09:13:20.984+07:00  INFO 9928 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T09:13:20.985+07:00  INFO 9928 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:13:20.987+07:00  WARN 9928 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

2025-08-04T09:13:20.988+07:00  INFO 9928 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:13:21.148+07:00  INFO 9928 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:13:21.152+07:00  INFO 9928 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:13:21.204+07:00 ERROR 9928 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at liquibase.changelog.DatabaseChangeLog.validate(DatabaseChangeLog.java:358) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:92) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T09:14:12.881+07:00  INFO 17632 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 17632 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:14:12.885+07:00  INFO 17632 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:14:15.401+07:00  INFO 17632 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:14:15.401+07:00  INFO 17632 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:14:15.470+07:00  INFO 17632 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:14:15.643+07:00  INFO 17632 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:14:15.977+07:00  INFO 17632 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@e0ebd61
2025-08-04T09:14:15.978+07:00  INFO 17632 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:14:16.193+07:00  INFO 17632 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:14:16.624+07:00  INFO 17632 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:14:16.657+07:00  INFO 17632 --- [restartedMain] liquibase.changelog                      : Change failed validation!
2025-08-04T09:14:16.660+07:00  INFO 17632 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:14:16.660+07:00  INFO 17632 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:14:16.661+07:00  INFO 17632 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ValidationFailedException
2025-08-04T09:14:16.661+07:00  INFO 17632 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

2025-08-04T09:14:16.661+07:00  INFO 17632 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T09:14:16.662+07:00  INFO 17632 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:14:16.664+07:00  WARN 17632 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

2025-08-04T09:14:16.664+07:00  INFO 17632 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:14:16.756+07:00  INFO 17632 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:14:16.759+07:00  INFO 17632 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:14:16.796+07:00 ERROR 17632 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at liquibase.changelog.DatabaseChangeLog.validate(DatabaseChangeLog.java:358) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:92) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T09:17:10.188+07:00  INFO 1416 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 1416 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:17:10.191+07:00  INFO 1416 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:17:12.210+07:00  INFO 1416 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:17:12.211+07:00  INFO 1416 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:17:12.278+07:00  INFO 1416 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:17:12.371+07:00  WARN 1416 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: Failed to instantiate [liquibase.integration.spring.SpringLiquibase]: Factory method 'liquibase' threw exception with message: Error creating bean with name 'dataSource' defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception with message: Failed to determine a suitable driver class
2025-08-04T09:17:12.374+07:00  INFO 1416 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:17:12.419+07:00 ERROR 1416 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.

Reason: Failed to determine a suitable driver class


Action:

Consider the following:
	If you want an embedded database (H2, HSQL or Derby), please put it on the classpath.
	If you have database settings to be loaded from a particular profile you may need to activate it (no profiles are currently active).

2025-08-04T09:17:28.972+07:00  INFO 14700 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14700 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:17:28.975+07:00  INFO 14700 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:17:30.897+07:00  INFO 14700 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:17:30.898+07:00  INFO 14700 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:17:30.972+07:00  INFO 14700 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:17:31.154+07:00  INFO 14700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:17:31.372+07:00  INFO 14700 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3ac68d93
2025-08-04T09:17:31.374+07:00  INFO 14700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:17:31.587+07:00  INFO 14700 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:17:31.981+07:00  INFO 14700 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:17:31.982+07:00  INFO 14700 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:17:31.982+07:00  INFO 14700 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T09:17:31.982+07:00  INFO 14700 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2025-08-04T09:17:31.982+07:00  INFO 14700 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T09:17:31.982+07:00  INFO 14700 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:17:31.984+07:00  WARN 14700 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2025-08-04T09:17:31.984+07:00  INFO 14700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:17:32.042+07:00  INFO 14700 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:17:32.046+07:00  INFO 14700 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:17:32.090+07:00 ERROR 14700 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2025-08-04T09:17:50.839+07:00  INFO 3508 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 3508 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:17:50.843+07:00  INFO 3508 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:17:52.679+07:00  INFO 3508 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:17:52.680+07:00  INFO 3508 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:17:52.745+07:00  INFO 3508 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:17:52.906+07:00  INFO 3508 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:17:53.117+07:00  INFO 3508 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@62bc6738
2025-08-04T09:17:53.120+07:00  INFO 3508 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:17:53.328+07:00  INFO 3508 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:17:53.765+07:00  INFO 3508 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:17:53.801+07:00  INFO 3508 --- [restartedMain] liquibase.changelog                      : Change failed validation!
2025-08-04T09:17:53.804+07:00  INFO 3508 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:17:53.804+07:00  INFO 3508 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:17:53.804+07:00  INFO 3508 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ValidationFailedException
2025-08-04T09:17:53.804+07:00  INFO 3508 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

2025-08-04T09:17:53.804+07:00  INFO 3508 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T09:17:53.804+07:00  INFO 3508 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:17:53.806+07:00  WARN 3508 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

2025-08-04T09:17:53.807+07:00  INFO 3508 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:17:53.883+07:00  INFO 3508 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:17:53.886+07:00  INFO 3508 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:17:53.923+07:00 ERROR 3508 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at liquibase.changelog.DatabaseChangeLog.validate(DatabaseChangeLog.java:358) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:92) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T09:18:34.310+07:00  INFO 3772 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.12 with PID 3772 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:18:34.314+07:00  INFO 3772 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:18:36.490+07:00  INFO 3772 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:18:36.490+07:00  INFO 3772 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:18:36.558+07:00  INFO 3772 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:18:36.721+07:00  INFO 3772 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:18:36.939+07:00  INFO 3772 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2659e3f1
2025-08-04T09:18:36.941+07:00  INFO 3772 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:18:37.136+07:00  INFO 3772 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:18:37.560+07:00  INFO 3772 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:18:37.591+07:00  INFO 3772 --- [restartedMain] liquibase.changelog                      : Change failed validation!
2025-08-04T09:18:37.594+07:00  INFO 3772 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:18:37.595+07:00  INFO 3772 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:18:37.595+07:00  INFO 3772 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ValidationFailedException
2025-08-04T09:18:37.595+07:00  INFO 3772 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

2025-08-04T09:18:37.595+07:00  INFO 3772 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T09:18:37.596+07:00  INFO 3772 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:18:37.597+07:00  WARN 3772 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

2025-08-04T09:18:37.598+07:00  INFO 3772 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:18:37.691+07:00  INFO 3772 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:18:37.694+07:00  INFO 3772 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:18:37.739+07:00 ERROR 3772 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ValidationFailedException: Validation Failed:
     1 changesets check sum
          db/changelog/changelog.sql::raw::includeAll was: 9:2fd1b4445f37ece478989b46db436138 but is now: 9:6ac74aba0e3dd6c95c98ecb0c5ced4ea

	at liquibase.changelog.DatabaseChangeLog.validate(DatabaseChangeLog.java:358) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:92) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T09:19:09.873+07:00  INFO 14476 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.12 with PID 14476 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:19:09.877+07:00  INFO 14476 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:19:11.900+07:00  INFO 14476 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:19:11.901+07:00  INFO 14476 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:19:11.965+07:00  INFO 14476 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:19:12.130+07:00  INFO 14476 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:19:12.347+07:00  INFO 14476 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@30bfa310
2025-08-04T09:19:12.349+07:00  INFO 14476 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:19:12.556+07:00  INFO 14476 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:19:12.982+07:00  INFO 14476 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:19:13.047+07:00  INFO 14476 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T09:19:13.049+07:00  INFO 14476 --- [restartedMain] liquibase.command                        : Using deploymentId: 4273953049
2025-08-04T09:19:13.051+07:00  INFO 14476 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:19:13.064+07:00  INFO 14476 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::create-role-with-permission-v2::wabi
2025-08-04T09:19:13.098+07:00 ERROR 14476 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::create-role-with-permission-v2::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:19:13.120+07:00  INFO 14476 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T09:19:13.121+07:00  INFO 14476 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T09:19:13.121+07:00  INFO 14476 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T09:19:13.121+07:00  INFO 14476 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T09:19:13.121+07:00  INFO 14476 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T09:19:13.121+07:00  INFO 14476 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T09:19:13.123+07:00  INFO 14476 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T09:19:13.127+07:00  INFO 14476 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T09:19:13.131+07:00  INFO 14476 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T09:19:13.135+07:00  INFO 14476 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:19:13.135+07:00  INFO 14476 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:19:13.135+07:00  INFO 14476 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T09:19:13.135+07:00  INFO 14476 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
2025-08-04T09:19:13.135+07:00  INFO 14476 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T09:19:13.136+07:00  INFO 14476 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:19:13.138+07:00  WARN 14476 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
2025-08-04T09:19:13.138+07:00  INFO 14476 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:19:13.265+07:00  INFO 14476 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:19:13.269+07:00  INFO 14476 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:19:13.307+07:00 ERROR 14476 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::create-role-with-permission-v2::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 152 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    permission_name TEXT[],
    description TEXT
)
    LANGUAGE plpgsql
AS
$$
DECLARE
    role_id          INT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T09:19:58.866+07:00  INFO 2220 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.12 with PID 2220 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:19:58.869+07:00  INFO 2220 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:20:00.917+07:00  INFO 2220 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:20:00.918+07:00  INFO 2220 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:20:01.004+07:00  INFO 2220 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:20:01.253+07:00  INFO 2220 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:20:01.508+07:00  INFO 2220 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@332689ff
2025-08-04T09:20:01.511+07:00  INFO 2220 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:20:01.738+07:00  INFO 2220 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:20:02.134+07:00  WARN 2220 --- [restartedMain] liquibase.parser                         : Skipping empty file 'classpath:db/changelog/changelog.sql'
2025-08-04T09:20:02.145+07:00  WARN 2220 --- [restartedMain] liquibase.parser                         : Unable to parse empty file 'classpath:db/changelog/changelog.sql'
2025-08-04T09:20:02.148+07:00  INFO 2220 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:20:02.148+07:00  INFO 2220 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:20:02.149+07:00  INFO 2220 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T09:20:02.149+07:00  INFO 2220 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unable to parse empty file 'classpath:db/changelog/changelog.sql'
2025-08-04T09:20:02.149+07:00  INFO 2220 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T09:20:02.149+07:00  INFO 2220 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:20:02.152+07:00  WARN 2220 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: Unable to parse empty file 'classpath:db/changelog/changelog.sql'
2025-08-04T09:20:02.152+07:00  INFO 2220 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:20:02.236+07:00  INFO 2220 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:20:02.240+07:00  INFO 2220 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:20:02.285+07:00 ERROR 2220 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: Unable to parse empty file 'classpath:db/changelog/changelog.sql'
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: Unable to parse empty file 'classpath:db/changelog/changelog.sql'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: Unable to parse empty file 'classpath:db/changelog/changelog.sql'
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: Unable to parse empty file 'classpath:db/changelog/changelog.sql'
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: Unable to parse empty file 'classpath:db/changelog/changelog.sql'
	at liquibase.parser.core.sql.SqlChangeLogParser.parse(SqlChangeLogParser.java:50) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T09:20:22.627+07:00  INFO 14664 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.12 with PID 14664 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:20:22.630+07:00  INFO 14664 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:20:24.871+07:00  INFO 14664 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:20:24.871+07:00  INFO 14664 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:20:24.935+07:00  INFO 14664 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:20:25.111+07:00  INFO 14664 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:20:25.340+07:00  INFO 14664 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@391212c
2025-08-04T09:20:25.342+07:00  INFO 14664 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:20:25.544+07:00  INFO 14664 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:20:25.897+07:00  INFO 14664 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:20:25.897+07:00  INFO 14664 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:20:25.897+07:00  INFO 14664 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T09:20:25.897+07:00  INFO 14664 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2025-08-04T09:20:25.897+07:00  INFO 14664 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T09:20:25.898+07:00  INFO 14664 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:20:25.899+07:00  WARN 14664 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2025-08-04T09:20:25.900+07:00  INFO 14664 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:20:26.020+07:00  INFO 14664 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:20:26.025+07:00  INFO 14664 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:20:26.063+07:00 ERROR 14664 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2025-08-04T09:21:11.400+07:00  INFO 3748 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 3748 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:21:11.403+07:00  INFO 3748 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:21:13.531+07:00  INFO 3748 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:21:13.531+07:00  INFO 3748 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:21:13.605+07:00  INFO 3748 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:21:13.797+07:00  INFO 3748 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:21:14.018+07:00  INFO 3748 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3755229c
2025-08-04T09:21:14.019+07:00  INFO 3748 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:21:14.260+07:00  INFO 3748 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:21:14.645+07:00  INFO 3748 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:21:14.646+07:00  INFO 3748 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:21:14.646+07:00  INFO 3748 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T09:21:14.646+07:00  INFO 3748 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2025-08-04T09:21:14.646+07:00  INFO 3748 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T09:21:14.647+07:00  INFO 3748 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:21:14.652+07:00  WARN 3748 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2025-08-04T09:21:14.653+07:00  INFO 3748 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:21:14.719+07:00  INFO 3748 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:21:14.725+07:00  INFO 3748 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:21:14.799+07:00 ERROR 3748 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2025-08-04T09:22:34.840+07:00  INFO 13344 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 13344 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:22:34.843+07:00  INFO 13344 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:22:36.673+07:00  INFO 13344 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:22:36.673+07:00  INFO 13344 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:22:36.743+07:00  INFO 13344 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:22:36.912+07:00  INFO 13344 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:22:37.129+07:00  INFO 13344 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3eaf056e
2025-08-04T09:22:37.131+07:00  INFO 13344 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:22:37.336+07:00  INFO 13344 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:22:37.651+07:00  INFO 13344 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:22:37.651+07:00  INFO 13344 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:22:37.651+07:00  INFO 13344 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T09:22:37.651+07:00  INFO 13344 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  classpath:/db/changelog/db.changelog-master.yaml does not exist
2025-08-04T09:22:37.651+07:00  INFO 13344 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T09:22:37.652+07:00  INFO 13344 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:22:37.653+07:00  WARN 13344 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: classpath:/db/changelog/db.changelog-master.yaml does not exist
2025-08-04T09:22:37.654+07:00  INFO 13344 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:22:37.671+07:00  INFO 13344 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:22:37.674+07:00  INFO 13344 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:22:37.710+07:00 ERROR 13344 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Liquibase failed to start because no changelog could be found at 'classpath:/db/changelog/db.changelog-master.yaml'.

Action:

Make sure a Liquibase changelog is present at the configured path.

2025-08-04T09:28:29.823+07:00  INFO 4028 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 4028 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:28:29.826+07:00  INFO 4028 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:28:31.904+07:00  INFO 4028 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:28:31.905+07:00  INFO 4028 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:28:31.990+07:00  INFO 4028 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:28:32.212+07:00  INFO 4028 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:28:32.461+07:00  INFO 4028 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3eaf056e
2025-08-04T09:28:32.463+07:00  INFO 4028 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:28:32.693+07:00  INFO 4028 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:28:33.012+07:00  WARN 4028 --- [restartedMain] liquibase.parser                         : Skipping empty file 'classpath:db/changelog/changelog.sql'
2025-08-04T09:28:33.018+07:00  WARN 4028 --- [restartedMain] liquibase.parser                         : Unable to parse empty file 'classpath:db/changelog/changelog.sql'
2025-08-04T09:28:33.020+07:00  INFO 4028 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T09:28:33.021+07:00  INFO 4028 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T09:28:33.021+07:00  INFO 4028 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T09:28:33.021+07:00  INFO 4028 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unable to parse empty file 'classpath:db/changelog/changelog.sql'
2025-08-04T09:28:33.021+07:00  INFO 4028 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T09:28:33.022+07:00  INFO 4028 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:28:33.028+07:00  WARN 4028 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: Unable to parse empty file 'classpath:db/changelog/changelog.sql'
2025-08-04T09:28:33.029+07:00  INFO 4028 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:28:33.127+07:00  INFO 4028 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:28:33.131+07:00  INFO 4028 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T09:28:33.167+07:00 ERROR 4028 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: Unable to parse empty file 'classpath:db/changelog/changelog.sql'
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: Unable to parse empty file 'classpath:db/changelog/changelog.sql'
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: Unable to parse empty file 'classpath:db/changelog/changelog.sql'
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: Unable to parse empty file 'classpath:db/changelog/changelog.sql'
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: Unable to parse empty file 'classpath:db/changelog/changelog.sql'
	at liquibase.parser.core.sql.SqlChangeLogParser.parse(SqlChangeLogParser.java:50) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T09:29:28.829+07:00  INFO 5896 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 5896 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:29:28.833+07:00  INFO 5896 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:29:30.739+07:00  INFO 5896 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:29:30.739+07:00  INFO 5896 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:29:30.823+07:00  INFO 5896 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:29:31.022+07:00  INFO 5896 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:29:31.241+07:00  INFO 5896 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@48714141
2025-08-04T09:29:31.243+07:00  INFO 5896 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:29:31.490+07:00  INFO 5896 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:29:32.023+07:00  INFO 5896 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:29:32.057+07:00  INFO 5896 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T09:29:32.059+07:00  INFO 5896 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:29:32.072+07:00  INFO 5896 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T09:29:32.073+07:00  INFO 5896 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T09:29:32.073+07:00  INFO 5896 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T09:29:32.073+07:00  INFO 5896 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T09:29:32.073+07:00  INFO 5896 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T09:29:32.073+07:00  INFO 5896 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T09:29:32.075+07:00  INFO 5896 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T09:29:32.114+07:00  INFO 5896 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T09:29:32.117+07:00  INFO 5896 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:29:32.238+07:00  INFO 5896 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T09:29:32.343+07:00  INFO 5896 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T09:29:32.400+07:00  INFO 5896 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T09:29:32.926+07:00  WARN 5896 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T09:29:34.275+07:00  INFO 5896 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T09:29:34.889+07:00  WARN 5896 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T09:29:35.594+07:00  INFO 5896 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 7.39 seconds (process running for 8.831)
2025-08-04T09:30:16.977+07:00  INFO 5896 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:30:16.983+07:00  INFO 5896 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:30:21.911+07:00  INFO 12320 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 12320 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:30:21.914+07:00  INFO 12320 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:30:24.531+07:00  INFO 12320 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:30:24.532+07:00  INFO 12320 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:30:24.627+07:00  INFO 12320 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:30:24.852+07:00  INFO 12320 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:30:25.222+07:00  INFO 12320 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@70efc547
2025-08-04T09:30:25.225+07:00  INFO 12320 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:30:25.475+07:00  INFO 12320 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:30:26.002+07:00  INFO 12320 --- [restartedMain] liquibase.changelog                      : Creating database history table with name: public.databasechangelog
2025-08-04T09:30:26.065+07:00  INFO 12320 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:30:26.121+07:00  INFO 12320 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T09:30:26.122+07:00  INFO 12320 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:30:26.130+07:00  INFO 12320 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T09:30:26.131+07:00  INFO 12320 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T09:30:26.131+07:00  INFO 12320 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T09:30:26.131+07:00  INFO 12320 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T09:30:26.131+07:00  INFO 12320 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T09:30:26.131+07:00  INFO 12320 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T09:30:26.132+07:00  INFO 12320 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T09:30:26.136+07:00  INFO 12320 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T09:30:26.138+07:00  INFO 12320 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:30:26.231+07:00  INFO 12320 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T09:30:26.327+07:00  INFO 12320 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T09:30:26.378+07:00  INFO 12320 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T09:30:27.020+07:00  WARN 12320 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T09:30:28.474+07:00  INFO 12320 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T09:30:29.284+07:00  WARN 12320 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T09:30:30.176+07:00  INFO 12320 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 8.899 seconds (process running for 10.612)
2025-08-04T09:31:27.042+07:00  INFO 12320 --- [http-nio-8000-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-04T09:31:27.352+07:00  WARN 12320 --- [http-nio-8000-exec-2] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [AppException(errorCode=NOT_FOUND)]
2025-08-04T09:51:14.556+07:00  INFO 12320 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T09:51:14.562+07:00  INFO 12320 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T09:51:24.985+07:00  INFO 4168 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 4168 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T09:51:24.989+07:00  INFO 4168 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T09:51:28.440+07:00  INFO 4168 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T09:51:28.440+07:00  INFO 4168 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T09:51:28.505+07:00  INFO 4168 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T09:51:28.836+07:00  INFO 4168 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T09:51:29.122+07:00  INFO 4168 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@68764aa9
2025-08-04T09:51:29.125+07:00  INFO 4168 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T09:51:29.475+07:00  INFO 4168 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T09:51:30.106+07:00  INFO 4168 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:51:30.138+07:00  INFO 4168 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T09:51:30.141+07:00  INFO 4168 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T09:51:30.160+07:00  INFO 4168 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T09:51:30.161+07:00  INFO 4168 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T09:51:30.161+07:00  INFO 4168 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T09:51:30.161+07:00  INFO 4168 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T09:51:30.161+07:00  INFO 4168 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T09:51:30.161+07:00  INFO 4168 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T09:51:30.163+07:00  INFO 4168 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T09:51:30.228+07:00  INFO 4168 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T09:51:30.230+07:00  INFO 4168 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T09:51:30.499+07:00  INFO 4168 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T09:51:30.616+07:00  INFO 4168 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T09:51:30.696+07:00  INFO 4168 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T09:51:31.319+07:00  WARN 4168 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T09:51:32.729+07:00  INFO 4168 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T09:51:33.361+07:00  WARN 4168 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T09:51:34.565+07:00  INFO 4168 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 10.272 seconds (process running for 11.815)
2025-08-04T09:54:34.303+07:00  INFO 4168 --- [http-nio-8000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-04T10:00:39.205+07:00  INFO 4168 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:00:39.209+07:00  INFO 4168 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:00:45.922+07:00  INFO 11484 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 11484 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:00:45.925+07:00  INFO 11484 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:00:47.902+07:00  INFO 11484 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:00:47.902+07:00  INFO 11484 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:00:47.982+07:00  INFO 11484 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T10:00:48.135+07:00  INFO 11484 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:00:48.340+07:00  INFO 11484 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@52dbe0b2
2025-08-04T10:00:48.348+07:00  INFO 11484 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:00:48.564+07:00  INFO 11484 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:00:49.014+07:00  INFO 11484 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:00:49.043+07:00  INFO 11484 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:00:49.045+07:00  INFO 11484 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:00:49.059+07:00  INFO 11484 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:00:49.059+07:00  INFO 11484 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T10:00:49.059+07:00  INFO 11484 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T10:00:49.060+07:00  INFO 11484 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T10:00:49.060+07:00  INFO 11484 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T10:00:49.060+07:00  INFO 11484 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T10:00:49.062+07:00  INFO 11484 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T10:00:49.111+07:00  INFO 11484 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:00:49.115+07:00  INFO 11484 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:00:49.218+07:00  INFO 11484 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:00:49.306+07:00  INFO 11484 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T10:00:49.380+07:00  INFO 11484 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:00:49.894+07:00  WARN 11484 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:00:51.157+07:00  INFO 11484 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:00:51.718+07:00  WARN 11484 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:00:52.412+07:00  INFO 11484 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 7.095 seconds (process running for 8.454)
2025-08-04T10:01:32.674+07:00  INFO 11484 --- [http-nio-8000-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-04T10:01:50.939+07:00  INFO 11484 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:01:50.942+07:00  INFO 11484 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:02:06.313+07:00  INFO 3856 --- [Test worker] c.e.u.UserServiceApplicationTests        : Starting UserServiceApplicationTests using Java 17.0.12 with PID 3856 (started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:02:06.316+07:00  INFO 3856 --- [Test worker] c.e.u.UserServiceApplicationTests        : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:02:08.817+07:00  INFO 3856 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:02:09.166+07:00  INFO 3856 --- [Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4e17442f
2025-08-04T10:02:09.169+07:00  INFO 3856 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:02:09.491+07:00  INFO 3856 --- [Test worker] liquibase.database                       : Set default schema name to public
2025-08-04T10:02:10.136+07:00  INFO 3856 --- [Test worker] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:02:10.177+07:00  INFO 3856 --- [Test worker] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:02:10.180+07:00  INFO 3856 --- [Test worker] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:02:10.191+07:00  INFO 3856 --- [Test worker] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:02:10.192+07:00  INFO 3856 --- [Test worker] liquibase.util                           : Run:                          0
2025-08-04T10:02:10.192+07:00  INFO 3856 --- [Test worker] liquibase.util                           : Previously run:               0
2025-08-04T10:02:10.192+07:00  INFO 3856 --- [Test worker] liquibase.util                           : Filtered out:                 0
2025-08-04T10:02:10.193+07:00  INFO 3856 --- [Test worker] liquibase.util                           : -------------------------------
2025-08-04T10:02:10.193+07:00  INFO 3856 --- [Test worker] liquibase.util                           : Total change sets:            0
2025-08-04T10:02:10.195+07:00  INFO 3856 --- [Test worker] liquibase.util                           : Update summary generated
2025-08-04T10:02:10.242+07:00  INFO 3856 --- [Test worker] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:02:10.246+07:00  INFO 3856 --- [Test worker] liquibase.command                        : Command execution complete
2025-08-04T10:02:10.410+07:00  INFO 3856 --- [Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:02:10.505+07:00  INFO 3856 --- [Test worker] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T10:02:10.561+07:00  INFO 3856 --- [Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:02:11.239+07:00  WARN 3856 --- [Test worker] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:02:13.043+07:00  INFO 3856 --- [Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:02:14.145+07:00  WARN 3856 --- [Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:02:15.955+07:00  INFO 3856 --- [Test worker] c.e.u.UserServiceApplicationTests        : Started UserServiceApplicationTests in 10.147 seconds (process running for 12.335)
2025-08-04T10:02:16.738+07:00  INFO 3856 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:02:16.744+07:00  INFO 3856 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:05:44.377+07:00  INFO 3144 --- [Test worker] c.e.u.UserServiceApplicationTests        : Starting UserServiceApplicationTests using Java 17.0.12 with PID 3144 (started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:05:44.380+07:00  INFO 3144 --- [Test worker] c.e.u.UserServiceApplicationTests        : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:05:46.963+07:00  INFO 3144 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:05:47.382+07:00  INFO 3144 --- [Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7ae590f6
2025-08-04T10:05:47.386+07:00  INFO 3144 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:05:47.682+07:00  INFO 3144 --- [Test worker] liquibase.database                       : Set default schema name to public
2025-08-04T10:05:48.330+07:00  INFO 3144 --- [Test worker] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:05:48.373+07:00  INFO 3144 --- [Test worker] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:05:48.377+07:00  INFO 3144 --- [Test worker] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:05:48.394+07:00  INFO 3144 --- [Test worker] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:05:48.395+07:00  INFO 3144 --- [Test worker] liquibase.util                           : Run:                          0
2025-08-04T10:05:48.396+07:00  INFO 3144 --- [Test worker] liquibase.util                           : Previously run:               0
2025-08-04T10:05:48.397+07:00  INFO 3144 --- [Test worker] liquibase.util                           : Filtered out:                 0
2025-08-04T10:05:48.398+07:00  INFO 3144 --- [Test worker] liquibase.util                           : -------------------------------
2025-08-04T10:05:48.398+07:00  INFO 3144 --- [Test worker] liquibase.util                           : Total change sets:            0
2025-08-04T10:05:48.401+07:00  INFO 3144 --- [Test worker] liquibase.util                           : Update summary generated
2025-08-04T10:05:48.456+07:00  INFO 3144 --- [Test worker] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:05:48.460+07:00  INFO 3144 --- [Test worker] liquibase.command                        : Command execution complete
2025-08-04T10:05:48.628+07:00  INFO 3144 --- [Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:05:48.760+07:00  INFO 3144 --- [Test worker] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T10:05:48.828+07:00  INFO 3144 --- [Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:05:49.543+07:00  WARN 3144 --- [Test worker] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:05:51.191+07:00  INFO 3144 --- [Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:05:51.936+07:00  WARN 3144 --- [Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:05:53.410+07:00  INFO 3144 --- [Test worker] c.e.u.UserServiceApplicationTests        : Started UserServiceApplicationTests in 9.52 seconds (process running for 11.438)
2025-08-04T10:06:00.323+07:00  INFO 1672 --- [Test worker] c.e.u.UserServiceApplicationTests        : Starting UserServiceApplicationTests using Java 17.0.12 with PID 1672 (started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:06:00.326+07:00  INFO 1672 --- [Test worker] c.e.u.UserServiceApplicationTests        : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:06:03.997+07:00  INFO 1672 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:06:04.494+07:00  INFO 1672 --- [Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@370c7cc5
2025-08-04T10:06:04.498+07:00  INFO 1672 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:06:04.932+07:00  INFO 1672 --- [Test worker] liquibase.database                       : Set default schema name to public
2025-08-04T10:06:06.034+07:00  INFO 1672 --- [Test worker] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:06:06.085+07:00  INFO 1672 --- [Test worker] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:06:06.093+07:00  INFO 1672 --- [Test worker] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:06:06.110+07:00  INFO 1672 --- [Test worker] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:06:06.111+07:00  INFO 1672 --- [Test worker] liquibase.util                           : Run:                          0
2025-08-04T10:06:06.111+07:00  INFO 1672 --- [Test worker] liquibase.util                           : Previously run:               0
2025-08-04T10:06:06.111+07:00  INFO 1672 --- [Test worker] liquibase.util                           : Filtered out:                 0
2025-08-04T10:06:06.112+07:00  INFO 1672 --- [Test worker] liquibase.util                           : -------------------------------
2025-08-04T10:06:06.112+07:00  INFO 1672 --- [Test worker] liquibase.util                           : Total change sets:            0
2025-08-04T10:06:06.114+07:00  INFO 1672 --- [Test worker] liquibase.util                           : Update summary generated
2025-08-04T10:06:06.170+07:00  INFO 1672 --- [Test worker] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:06:06.173+07:00  INFO 1672 --- [Test worker] liquibase.command                        : Command execution complete
2025-08-04T10:06:06.431+07:00  INFO 1672 --- [Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:06:06.660+07:00  INFO 1672 --- [Test worker] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T10:06:06.765+07:00  INFO 1672 --- [Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:06:07.838+07:00  WARN 1672 --- [Test worker] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:06:10.010+07:00  INFO 1672 --- [Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:06:11.408+07:00  WARN 1672 --- [Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:06:13.136+07:00  INFO 1672 --- [Test worker] c.e.u.UserServiceApplicationTests        : Started UserServiceApplicationTests in 13.808 seconds (process running for 16.457)
2025-08-04T10:06:14.508+07:00  INFO 1672 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:06:14.598+07:00  INFO 1672 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:06:21.181+07:00  INFO 14136 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14136 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:06:21.184+07:00  INFO 14136 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:06:23.714+07:00  INFO 14136 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:06:23.714+07:00  INFO 14136 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:06:23.780+07:00  INFO 14136 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T10:06:23.947+07:00  INFO 14136 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:06:24.170+07:00  INFO 14136 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4ab083e
2025-08-04T10:06:24.172+07:00  INFO 14136 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:06:24.413+07:00  INFO 14136 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:06:24.831+07:00  INFO 14136 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:06:24.869+07:00  INFO 14136 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:06:24.872+07:00  INFO 14136 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:06:24.882+07:00  INFO 14136 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:06:24.882+07:00  INFO 14136 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T10:06:24.883+07:00  INFO 14136 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T10:06:24.883+07:00  INFO 14136 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T10:06:24.883+07:00  INFO 14136 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T10:06:24.883+07:00  INFO 14136 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T10:06:24.885+07:00  INFO 14136 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T10:06:24.921+07:00  INFO 14136 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:06:24.923+07:00  INFO 14136 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:06:25.020+07:00  INFO 14136 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:06:25.112+07:00  INFO 14136 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T10:06:25.173+07:00  INFO 14136 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:06:25.700+07:00  WARN 14136 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:06:26.986+07:00  INFO 14136 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:06:27.575+07:00  WARN 14136 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:06:28.377+07:00  INFO 14136 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 7.89 seconds (process running for 8.868)
2025-08-04T10:06:47.701+07:00  INFO 14136 --- [http-nio-8000-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-04T10:09:11.084+07:00  INFO 14136 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:09:11.096+07:00  INFO 14136 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:09:15.585+07:00  INFO 5624 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 5624 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:09:15.588+07:00  INFO 5624 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:09:17.628+07:00  INFO 5624 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:09:17.628+07:00  INFO 5624 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:09:17.706+07:00  INFO 5624 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T10:09:17.891+07:00  INFO 5624 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:09:18.106+07:00  INFO 5624 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@b6a6bd
2025-08-04T10:09:18.114+07:00  INFO 5624 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:09:18.321+07:00  INFO 5624 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:09:18.714+07:00  INFO 5624 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:09:18.748+07:00  INFO 5624 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:09:18.750+07:00  INFO 5624 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:09:18.757+07:00  INFO 5624 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:09:18.757+07:00  INFO 5624 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T10:09:18.757+07:00  INFO 5624 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T10:09:18.757+07:00  INFO 5624 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T10:09:18.757+07:00  INFO 5624 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T10:09:18.757+07:00  INFO 5624 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T10:09:18.758+07:00  INFO 5624 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T10:09:18.806+07:00  INFO 5624 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:09:18.812+07:00  INFO 5624 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:09:18.909+07:00  INFO 5624 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:09:19.008+07:00  INFO 5624 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T10:09:19.067+07:00  INFO 5624 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:09:19.589+07:00  WARN 5624 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:09:20.878+07:00  INFO 5624 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:09:21.459+07:00  WARN 5624 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:09:22.227+07:00  INFO 5624 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 7.269 seconds (process running for 8.278)
2025-08-04T10:09:26.196+07:00  INFO 5624 --- [http-nio-8000-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-04T10:09:33.125+07:00  INFO 5624 --- [Thread-5] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:09:33.130+07:00  INFO 5624 --- [Thread-5] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:09:43.137+07:00  INFO 5624 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 5624 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:09:43.138+07:00  INFO 5624 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:09:43.809+07:00  INFO 5624 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:09:43.809+07:00  INFO 5624 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:09:43.835+07:00  INFO 5624 --- [restartedMain] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2025-08-04T10:09:43.875+07:00  INFO 5624 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-08-04T10:09:44.050+07:00  INFO 5624 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection org.postgresql.jdbc.PgConnection@42b93960
2025-08-04T10:09:44.051+07:00  INFO 5624 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-08-04T10:09:44.075+07:00  INFO 5624 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:09:44.128+07:00  INFO 5624 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:09:44.144+07:00  INFO 5624 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:09:44.146+07:00  INFO 5624 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:09:44.147+07:00  INFO 5624 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:09:44.147+07:00  INFO 5624 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T10:09:44.147+07:00  INFO 5624 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T10:09:44.147+07:00  INFO 5624 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T10:09:44.147+07:00  INFO 5624 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T10:09:44.148+07:00  INFO 5624 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T10:09:44.148+07:00  INFO 5624 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T10:09:44.153+07:00  INFO 5624 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:09:44.154+07:00  INFO 5624 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:09:44.187+07:00  INFO 5624 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:09:44.194+07:00  INFO 5624 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:09:44.217+07:00  WARN 5624 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:09:44.358+07:00  INFO 5624 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:09:44.540+07:00  WARN 5624 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:09:44.846+07:00  INFO 5624 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 1.766 seconds (process running for 30.896)
2025-08-04T10:09:49.018+07:00  INFO 9528 --- [Test worker] c.e.u.UserServiceApplicationTests        : Starting UserServiceApplicationTests using Java 17.0.12 with PID 9528 (started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:09:49.021+07:00  INFO 9528 --- [Test worker] c.e.u.UserServiceApplicationTests        : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:09:51.835+07:00  INFO 9528 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:09:52.264+07:00  INFO 9528 --- [Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@7159d601
2025-08-04T10:09:52.267+07:00  INFO 9528 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:09:52.575+07:00  INFO 9528 --- [Test worker] liquibase.database                       : Set default schema name to public
2025-08-04T10:09:53.223+07:00  INFO 9528 --- [Test worker] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:09:53.264+07:00  INFO 9528 --- [Test worker] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:09:53.267+07:00  INFO 9528 --- [Test worker] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:09:53.279+07:00  INFO 9528 --- [Test worker] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:09:53.279+07:00  INFO 9528 --- [Test worker] liquibase.util                           : Run:                          0
2025-08-04T10:09:53.279+07:00  INFO 9528 --- [Test worker] liquibase.util                           : Previously run:               0
2025-08-04T10:09:53.280+07:00  INFO 9528 --- [Test worker] liquibase.util                           : Filtered out:                 0
2025-08-04T10:09:53.280+07:00  INFO 9528 --- [Test worker] liquibase.util                           : -------------------------------
2025-08-04T10:09:53.280+07:00  INFO 9528 --- [Test worker] liquibase.util                           : Total change sets:            0
2025-08-04T10:09:53.282+07:00  INFO 9528 --- [Test worker] liquibase.util                           : Update summary generated
2025-08-04T10:09:53.328+07:00  INFO 9528 --- [Test worker] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:09:53.332+07:00  INFO 9528 --- [Test worker] liquibase.command                        : Command execution complete
2025-08-04T10:09:53.535+07:00  INFO 9528 --- [Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:09:53.687+07:00  INFO 9528 --- [Test worker] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T10:09:53.755+07:00  INFO 9528 --- [Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:09:54.448+07:00  WARN 9528 --- [Test worker] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:09:56.281+07:00  INFO 9528 --- [Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:09:57.447+07:00  WARN 9528 --- [Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:09:59.023+07:00  INFO 9528 --- [Test worker] c.e.u.UserServiceApplicationTests        : Started UserServiceApplicationTests in 10.541 seconds (process running for 12.884)
2025-08-04T10:10:00.049+07:00  INFO 9528 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:10:00.063+07:00  INFO 9528 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:10:04.052+07:00  INFO 5624 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-08-04T10:10:04.063+07:00  INFO 5624 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-08-04T10:11:20.803+07:00  INFO 3568 --- [Test worker] c.e.u.UserServiceApplicationTests        : Starting UserServiceApplicationTests using Java 17.0.12 with PID 3568 (started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:11:20.805+07:00  INFO 3568 --- [Test worker] c.e.u.UserServiceApplicationTests        : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:11:22.990+07:00  INFO 3568 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:11:23.369+07:00  INFO 3568 --- [Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2a5abd3c
2025-08-04T10:11:23.372+07:00  INFO 3568 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:11:23.854+07:00  INFO 3568 --- [Test worker] liquibase.database                       : Set default schema name to public
2025-08-04T10:11:25.605+07:00  INFO 3568 --- [Test worker] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:11:25.674+07:00  INFO 3568 --- [Test worker] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:11:25.682+07:00  INFO 3568 --- [Test worker] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:11:25.710+07:00  INFO 3568 --- [Test worker] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:11:25.711+07:00  INFO 3568 --- [Test worker] liquibase.util                           : Run:                          0
2025-08-04T10:11:25.712+07:00  INFO 3568 --- [Test worker] liquibase.util                           : Previously run:               0
2025-08-04T10:11:25.713+07:00  INFO 3568 --- [Test worker] liquibase.util                           : Filtered out:                 0
2025-08-04T10:11:25.713+07:00  INFO 3568 --- [Test worker] liquibase.util                           : -------------------------------
2025-08-04T10:11:25.713+07:00  INFO 3568 --- [Test worker] liquibase.util                           : Total change sets:            0
2025-08-04T10:11:25.718+07:00  INFO 3568 --- [Test worker] liquibase.util                           : Update summary generated
2025-08-04T10:11:25.819+07:00  INFO 3568 --- [Test worker] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:11:25.822+07:00  INFO 3568 --- [Test worker] liquibase.command                        : Command execution complete
2025-08-04T10:11:26.230+07:00  INFO 3568 --- [Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:11:26.762+07:00  INFO 3568 --- [Test worker] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T10:11:26.875+07:00  INFO 3568 --- [Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:11:27.563+07:00  WARN 3568 --- [Test worker] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:11:29.161+07:00  INFO 3568 --- [Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:11:30.257+07:00  WARN 3568 --- [Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:11:33.952+07:00  INFO 3568 --- [Test worker] c.e.u.UserServiceApplicationTests        : Started UserServiceApplicationTests in 13.622 seconds (process running for 15.578)
2025-08-04T10:11:34.913+07:00  INFO 3568 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:11:34.925+07:00  INFO 3568 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:12:05.686+07:00  INFO 5836 --- [Test worker] c.e.u.UserServiceApplicationTests        : Starting UserServiceApplicationTests using Java 17.0.12 with PID 5836 (started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:12:05.689+07:00  INFO 5836 --- [Test worker] c.e.u.UserServiceApplicationTests        : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:12:09.311+07:00  INFO 5836 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:12:09.891+07:00  INFO 5836 --- [Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@29bd85db
2025-08-04T10:12:09.896+07:00  INFO 5836 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:12:10.348+07:00  INFO 5836 --- [Test worker] liquibase.database                       : Set default schema name to public
2025-08-04T10:12:11.320+07:00  INFO 5836 --- [Test worker] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:12:11.372+07:00  INFO 5836 --- [Test worker] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:12:11.375+07:00  INFO 5836 --- [Test worker] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:12:11.388+07:00  INFO 5836 --- [Test worker] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:12:11.389+07:00  INFO 5836 --- [Test worker] liquibase.util                           : Run:                          0
2025-08-04T10:12:11.389+07:00  INFO 5836 --- [Test worker] liquibase.util                           : Previously run:               0
2025-08-04T10:12:11.389+07:00  INFO 5836 --- [Test worker] liquibase.util                           : Filtered out:                 0
2025-08-04T10:12:11.390+07:00  INFO 5836 --- [Test worker] liquibase.util                           : -------------------------------
2025-08-04T10:12:11.390+07:00  INFO 5836 --- [Test worker] liquibase.util                           : Total change sets:            0
2025-08-04T10:12:11.392+07:00  INFO 5836 --- [Test worker] liquibase.util                           : Update summary generated
2025-08-04T10:12:11.442+07:00  INFO 5836 --- [Test worker] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:12:11.445+07:00  INFO 5836 --- [Test worker] liquibase.command                        : Command execution complete
2025-08-04T10:12:11.640+07:00  INFO 5836 --- [Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:12:11.788+07:00  INFO 5836 --- [Test worker] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T10:12:11.863+07:00  INFO 5836 --- [Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:12:12.495+07:00  WARN 5836 --- [Test worker] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:12:14.360+07:00  INFO 5836 --- [Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:12:15.272+07:00  WARN 5836 --- [Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:12:17.681+07:00  INFO 5836 --- [Test worker] c.e.u.UserServiceApplicationTests        : Started UserServiceApplicationTests in 12.548 seconds (process running for 15.043)
2025-08-04T10:12:18.629+07:00  INFO 5836 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:12:18.646+07:00  INFO 5836 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:15:42.431+07:00  INFO 4120 --- [Test worker] c.e.u.UserServiceApplicationTests        : Starting UserServiceApplicationTests using Java 17.0.12 with PID 4120 (started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:15:42.434+07:00  INFO 4120 --- [Test worker] c.e.u.UserServiceApplicationTests        : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:15:44.604+07:00  INFO 4120 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:15:44.967+07:00  INFO 4120 --- [Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@a056b26
2025-08-04T10:15:44.971+07:00  INFO 4120 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:15:45.287+07:00  INFO 4120 --- [Test worker] liquibase.database                       : Set default schema name to public
2025-08-04T10:15:45.879+07:00  INFO 4120 --- [Test worker] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:15:45.913+07:00  INFO 4120 --- [Test worker] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:15:45.916+07:00  INFO 4120 --- [Test worker] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:15:45.927+07:00  INFO 4120 --- [Test worker] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:15:45.928+07:00  INFO 4120 --- [Test worker] liquibase.util                           : Run:                          0
2025-08-04T10:15:45.928+07:00  INFO 4120 --- [Test worker] liquibase.util                           : Previously run:               0
2025-08-04T10:15:45.929+07:00  INFO 4120 --- [Test worker] liquibase.util                           : Filtered out:                 0
2025-08-04T10:15:45.929+07:00  INFO 4120 --- [Test worker] liquibase.util                           : -------------------------------
2025-08-04T10:15:45.929+07:00  INFO 4120 --- [Test worker] liquibase.util                           : Total change sets:            0
2025-08-04T10:15:45.930+07:00  INFO 4120 --- [Test worker] liquibase.util                           : Update summary generated
2025-08-04T10:15:45.970+07:00  INFO 4120 --- [Test worker] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:15:45.974+07:00  INFO 4120 --- [Test worker] liquibase.command                        : Command execution complete
2025-08-04T10:15:46.118+07:00  INFO 4120 --- [Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:15:46.244+07:00  INFO 4120 --- [Test worker] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T10:15:46.331+07:00  INFO 4120 --- [Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:15:46.968+07:00  WARN 4120 --- [Test worker] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:15:48.456+07:00  INFO 4120 --- [Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:15:49.219+07:00  WARN 4120 --- [Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:15:50.345+07:00  INFO 4120 --- [Test worker] c.e.u.UserServiceApplicationTests        : Started UserServiceApplicationTests in 8.432 seconds (process running for 10.405)
2025-08-04T10:15:51.045+07:00  INFO 4120 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:15:51.054+07:00  INFO 4120 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:20:26.306+07:00  INFO 9688 --- [Test worker] c.e.u.UserServiceApplicationTests        : Starting UserServiceApplicationTests using Java 17.0.12 with PID 9688 (started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:20:26.308+07:00  INFO 9688 --- [Test worker] c.e.u.UserServiceApplicationTests        : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:20:28.829+07:00  INFO 9688 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:20:29.290+07:00  INFO 9688 --- [Test worker] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@62e73ab6
2025-08-04T10:20:29.294+07:00  INFO 9688 --- [Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:20:29.583+07:00  INFO 9688 --- [Test worker] liquibase.database                       : Set default schema name to public
2025-08-04T10:20:30.531+07:00  INFO 9688 --- [Test worker] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:20:30.577+07:00  INFO 9688 --- [Test worker] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:20:30.582+07:00  INFO 9688 --- [Test worker] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:20:30.597+07:00  INFO 9688 --- [Test worker] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:20:30.598+07:00  INFO 9688 --- [Test worker] liquibase.util                           : Run:                          0
2025-08-04T10:20:30.598+07:00  INFO 9688 --- [Test worker] liquibase.util                           : Previously run:               0
2025-08-04T10:20:30.598+07:00  INFO 9688 --- [Test worker] liquibase.util                           : Filtered out:                 0
2025-08-04T10:20:30.599+07:00  INFO 9688 --- [Test worker] liquibase.util                           : -------------------------------
2025-08-04T10:20:30.599+07:00  INFO 9688 --- [Test worker] liquibase.util                           : Total change sets:            0
2025-08-04T10:20:30.601+07:00  INFO 9688 --- [Test worker] liquibase.util                           : Update summary generated
2025-08-04T10:20:30.647+07:00  INFO 9688 --- [Test worker] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:20:30.651+07:00  INFO 9688 --- [Test worker] liquibase.command                        : Command execution complete
2025-08-04T10:20:30.858+07:00  INFO 9688 --- [Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:20:31.002+07:00  INFO 9688 --- [Test worker] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T10:20:31.076+07:00  INFO 9688 --- [Test worker] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:20:31.935+07:00  WARN 9688 --- [Test worker] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:20:33.379+07:00  INFO 9688 --- [Test worker] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:20:34.107+07:00  WARN 9688 --- [Test worker] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:20:35.427+07:00  INFO 9688 --- [Test worker] c.e.u.UserServiceApplicationTests        : Started UserServiceApplicationTests in 9.704 seconds (process running for 11.85)
2025-08-04T10:20:36.241+07:00  INFO 9688 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:20:36.247+07:00  INFO 9688 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:21:10.533+07:00  INFO 2484 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 2484 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:21:10.536+07:00  INFO 2484 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:21:12.480+07:00  INFO 2484 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:21:12.480+07:00  INFO 2484 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:21:12.544+07:00  INFO 2484 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T10:21:12.704+07:00  INFO 2484 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:21:12.926+07:00  INFO 2484 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@1184d51
2025-08-04T10:21:12.928+07:00  INFO 2484 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:21:13.123+07:00  INFO 2484 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:21:13.551+07:00  INFO 2484 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:21:13.581+07:00  INFO 2484 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:21:13.584+07:00  INFO 2484 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:21:13.594+07:00  INFO 2484 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:21:13.595+07:00  INFO 2484 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T10:21:13.595+07:00  INFO 2484 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T10:21:13.595+07:00  INFO 2484 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T10:21:13.595+07:00  INFO 2484 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T10:21:13.595+07:00  INFO 2484 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T10:21:13.597+07:00  INFO 2484 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T10:21:13.635+07:00  INFO 2484 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:21:13.642+07:00  INFO 2484 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:21:13.736+07:00  INFO 2484 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:21:13.830+07:00  INFO 2484 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T10:21:13.884+07:00  INFO 2484 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:21:14.393+07:00  WARN 2484 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:21:15.613+07:00  INFO 2484 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:21:16.168+07:00  WARN 2484 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:21:16.871+07:00  INFO 2484 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 6.949 seconds (process running for 7.994)
2025-08-04T10:24:28.803+07:00  INFO 2484 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:24:28.819+07:00  INFO 2484 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:25:33.990+07:00  INFO 6228 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 6228 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:25:34.000+07:00  INFO 6228 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:25:36.904+07:00  INFO 6228 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:25:36.904+07:00  INFO 6228 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:25:37.055+07:00  INFO 6228 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T10:25:37.233+07:00  INFO 6228 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:25:37.580+07:00  INFO 6228 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@57177f8d
2025-08-04T10:25:37.582+07:00  INFO 6228 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:25:37.812+07:00  INFO 6228 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:25:38.345+07:00  INFO 6228 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:25:38.380+07:00  INFO 6228 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:25:38.383+07:00  INFO 6228 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:25:38.391+07:00  INFO 6228 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:25:38.392+07:00  INFO 6228 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T10:25:38.392+07:00  INFO 6228 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T10:25:38.392+07:00  INFO 6228 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T10:25:38.392+07:00  INFO 6228 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T10:25:38.392+07:00  INFO 6228 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T10:25:38.393+07:00  INFO 6228 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T10:25:38.423+07:00  INFO 6228 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:25:38.425+07:00  INFO 6228 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:25:38.546+07:00  INFO 6228 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:25:38.698+07:00  INFO 6228 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T10:25:38.797+07:00  INFO 6228 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:25:39.368+07:00  WARN 6228 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:25:40.713+07:00  INFO 6228 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:25:41.370+07:00  WARN 6228 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:25:42.223+07:00  INFO 6228 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 9.063 seconds (process running for 10.647)
2025-08-04T10:25:56.824+07:00  INFO 6228 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:25:56.829+07:00  INFO 6228 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:26:04.391+07:00  INFO 10260 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 10260 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:26:04.395+07:00  INFO 10260 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:26:06.614+07:00  INFO 10260 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:26:06.615+07:00  INFO 10260 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:26:06.708+07:00  INFO 10260 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T10:26:06.885+07:00  INFO 10260 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:26:07.131+07:00  INFO 10260 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2066f18
2025-08-04T10:26:07.133+07:00  INFO 10260 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:26:07.359+07:00  INFO 10260 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:26:08.021+07:00  INFO 10260 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:26:08.069+07:00  INFO 10260 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:26:08.072+07:00  INFO 10260 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:26:08.084+07:00  INFO 10260 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:26:08.084+07:00  INFO 10260 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T10:26:08.084+07:00  INFO 10260 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T10:26:08.085+07:00  INFO 10260 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T10:26:08.085+07:00  INFO 10260 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T10:26:08.085+07:00  INFO 10260 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T10:26:08.087+07:00  INFO 10260 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T10:26:08.134+07:00  INFO 10260 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:26:08.137+07:00  INFO 10260 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:26:08.288+07:00  INFO 10260 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:26:08.400+07:00  INFO 10260 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T10:26:08.461+07:00  INFO 10260 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:26:09.005+07:00  WARN 10260 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:26:10.387+07:00  INFO 10260 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:26:11.064+07:00  WARN 10260 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:26:11.918+07:00  INFO 10260 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 8.251 seconds (process running for 9.532)
2025-08-04T10:26:12.221+07:00  INFO 10260 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:26:12.224+07:00  INFO 10260 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:26:16.966+07:00  INFO 17656 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 17656 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:26:16.971+07:00  INFO 17656 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:26:19.114+07:00  INFO 17656 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:26:19.114+07:00  INFO 17656 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:26:19.180+07:00  INFO 17656 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T10:26:19.361+07:00  INFO 17656 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:26:19.713+07:00  INFO 17656 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@152e5f20
2025-08-04T10:26:19.715+07:00  INFO 17656 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:26:20.026+07:00  INFO 17656 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:26:20.666+07:00  INFO 17656 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:26:20.713+07:00  INFO 17656 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:26:20.721+07:00  INFO 17656 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:26:20.738+07:00  INFO 17656 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:26:20.739+07:00  INFO 17656 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T10:26:20.739+07:00  INFO 17656 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T10:26:20.739+07:00  INFO 17656 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T10:26:20.739+07:00  INFO 17656 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T10:26:20.740+07:00  INFO 17656 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T10:26:20.742+07:00  INFO 17656 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T10:26:20.888+07:00  INFO 17656 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:26:20.891+07:00  INFO 17656 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:26:21.103+07:00  INFO 17656 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:26:21.347+07:00  INFO 17656 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T10:26:21.661+07:00  INFO 17656 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:26:23.047+07:00  WARN 17656 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:26:25.277+07:00  INFO 17656 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:26:26.496+07:00  WARN 17656 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:26:27.398+07:00  INFO 17656 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 11.089 seconds (process running for 12.098)
2025-08-04T10:27:00.317+07:00  INFO 17656 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:27:00.324+07:00  INFO 17656 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:27:04.470+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:27:04.475+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:27:06.549+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:27:06.550+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:27:06.643+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T10:27:06.843+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:27:07.123+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4e0eb55a
2025-08-04T10:27:07.125+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:27:07.441+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:27:07.886+07:00  INFO 14900 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:27:07.914+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:27:07.916+07:00  INFO 14900 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:27:07.928+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:27:07.928+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T10:27:07.929+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T10:27:07.929+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T10:27:07.929+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T10:27:07.929+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T10:27:07.931+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T10:27:07.976+07:00  INFO 14900 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:27:07.979+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:27:08.470+07:00  INFO 14900 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:27:08.760+07:00  INFO 14900 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T10:27:09.035+07:00  INFO 14900 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:27:09.758+07:00  WARN 14900 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:27:12.136+07:00  INFO 14900 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:27:13.297+07:00  WARN 14900 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:27:14.368+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 10.58 seconds (process running for 11.557)
2025-08-04T10:27:14.770+07:00  INFO 14900 --- [http-nio-8000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-04T10:27:55.237+07:00  WARN 14900 --- [http-nio-8000-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 42883
2025-08-04T10:27:55.238+07:00 ERROR 14900 --- [http-nio-8000-exec-4] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: procedure create_role_with_permission(character varying, character varying[], character varying) does not exist
  Hint: No procedure matches the given name and argument types. You might need to add explicit type casts.
  Position: 6
2025-08-04T10:27:55.258+07:00  WARN 14900 --- [http-nio-8000-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.InvalidDataAccessResourceUsageException: Error calling CallableStatement.getMoreResults [ERROR: procedure create_role_with_permission(character varying, character varying[], character varying) does not exist<EOL>  Hint: No procedure matches the given name and argument types. You might need to add explicit type casts.<EOL>  Position: 6] [HikariProxyCallableStatement@1928274220 wrapping call create_role_with_permission(('ADMIN'),?,('ROLE_ADMIN'))]; SQL [HikariProxyCallableStatement@1928274220 wrapping call create_role_with_permission(('ADMIN'),?,('ROLE_ADMIN'))]]
2025-08-04T10:33:08.976+07:00  WARN 14900 --- [http-nio-8000-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : SQL Error: 0, SQLState: 42883
2025-08-04T10:33:08.977+07:00 ERROR 14900 --- [http-nio-8000-exec-6] o.h.engine.jdbc.spi.SqlExceptionHelper   : ERROR: procedure create_role_with_permission(character varying, character varying[], character varying) does not exist
  Hint: No procedure matches the given name and argument types. You might need to add explicit type casts.
  Position: 6
2025-08-04T10:33:08.979+07:00  WARN 14900 --- [http-nio-8000-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [org.springframework.dao.InvalidDataAccessResourceUsageException: Error calling CallableStatement.getMoreResults [ERROR: procedure create_role_with_permission(character varying, character varying[], character varying) does not exist<EOL>  Hint: No procedure matches the given name and argument types. You might need to add explicit type casts.<EOL>  Position: 6] [HikariProxyCallableStatement@1047626317 wrapping call create_role_with_permission(('ADMIN'),?,('ROLE_ADMIN'))]; SQL [HikariProxyCallableStatement@1047626317 wrapping call create_role_with_permission(('ADMIN'),?,('ROLE_ADMIN'))]]
2025-08-04T10:34:47.009+07:00  INFO 14900 --- [Thread-5] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:34:47.014+07:00  INFO 14900 --- [Thread-5] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:34:47.174+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:34:47.174+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:34:47.937+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:34:47.937+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:34:47.981+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T10:34:48.043+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-08-04T10:34:48.121+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection org.postgresql.jdbc.PgConnection@7fe14fed
2025-08-04T10:34:48.122+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-08-04T10:34:48.148+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:34:48.201+07:00  INFO 14900 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:34:48.215+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:34:48.216+07:00  INFO 14900 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:34:48.219+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:34:48.219+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T10:34:48.219+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T10:34:48.219+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T10:34:48.220+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T10:34:48.220+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T10:34:48.220+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T10:34:48.223+07:00  INFO 14900 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:34:48.224+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:34:48.262+07:00  INFO 14900 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:34:48.270+07:00  INFO 14900 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:34:48.294+07:00  WARN 14900 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:34:48.510+07:00  INFO 14900 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:34:48.739+07:00  WARN 14900 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:34:48.993+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 1.869 seconds (process running for 466.181)
2025-08-04T10:34:53.846+07:00  INFO 14900 --- [Thread-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-08-04T10:34:53.852+07:00  INFO 14900 --- [Thread-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-08-04T10:34:53.990+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:34:53.990+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:34:54.432+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:34:54.432+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:34:54.462+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T10:34:54.496+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-08-04T10:34:54.566+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection org.postgresql.jdbc.PgConnection@70399a15
2025-08-04T10:34:54.566+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-08-04T10:34:54.585+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:34:54.630+07:00  INFO 14900 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:34:54.642+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:34:54.643+07:00  INFO 14900 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:34:54.645+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:34:54.645+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T10:34:54.646+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T10:34:54.646+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T10:34:54.646+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T10:34:54.646+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T10:34:54.646+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T10:34:54.649+07:00  INFO 14900 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:34:54.650+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:34:54.673+07:00  INFO 14900 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:34:54.679+07:00  INFO 14900 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:34:54.698+07:00  WARN 14900 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:34:55.017+07:00  INFO 14900 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:34:55.293+07:00  WARN 14900 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:34:55.634+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 1.679 seconds (process running for 472.822)
2025-08-04T10:34:58.691+07:00  INFO 14900 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-08-04T10:34:58.702+07:00  INFO 14900 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-08-04T10:34:58.866+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:34:58.867+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:34:59.549+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:34:59.550+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:34:59.587+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T10:34:59.662+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2025-08-04T10:34:59.796+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-4 - Added connection org.postgresql.jdbc.PgConnection@33d56ee1
2025-08-04T10:34:59.797+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2025-08-04T10:34:59.847+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:34:59.913+07:00  INFO 14900 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:34:59.931+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T10:34:59.932+07:00  INFO 14900 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:34:59.937+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:34:59.938+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T10:34:59.938+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T10:34:59.938+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T10:34:59.938+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T10:34:59.938+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T10:34:59.938+07:00  INFO 14900 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T10:34:59.945+07:00  INFO 14900 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:34:59.946+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:34:59.985+07:00  INFO 14900 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T10:34:59.991+07:00  INFO 14900 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T10:35:00.010+07:00  WARN 14900 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T10:35:00.227+07:00  INFO 14900 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T10:35:00.744+07:00  WARN 14900 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T10:35:01.296+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 2.475 seconds (process running for 478.483)
2025-08-04T10:35:08.303+07:00  INFO 14900 --- [Thread-15] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown initiated...
2025-08-04T10:35:08.306+07:00  INFO 14900 --- [Thread-15] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown completed.
2025-08-04T10:35:08.467+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:35:08.468+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:35:09.460+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:35:09.461+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:35:09.542+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T10:35:09.649+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Starting...
2025-08-04T10:35:09.937+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-5 - Added connection org.postgresql.jdbc.PgConnection@6cc6c48b
2025-08-04T10:35:09.938+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Start completed.
2025-08-04T10:35:09.969+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:35:09.996+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:35:09.997+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:35:09.997+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:35:09.997+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:35:09.997+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:35:09.997+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:35:10.002+07:00  WARN 14900 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:35:10.002+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown initiated...
2025-08-04T10:35:10.009+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown completed.
2025-08-04T10:35:10.010+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:35:10.067+07:00 ERROR 14900 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:35:54.001+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:35:54.001+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:35:54.484+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:35:54.485+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:35:54.517+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2025-08-04T10:35:54.560+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Starting...
2025-08-04T10:35:54.649+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-6 - Added connection org.postgresql.jdbc.PgConnection@fe7fb6d
2025-08-04T10:35:54.649+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Start completed.
2025-08-04T10:35:54.673+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:35:54.697+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:35:54.698+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:35:54.698+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:35:54.698+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:35:54.698+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:35:54.698+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:35:54.699+07:00  WARN 14900 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:35:54.699+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown initiated...
2025-08-04T10:35:54.700+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown completed.
2025-08-04T10:35:54.700+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:35:54.715+07:00 ERROR 14900 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:40:30.799+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:40:30.800+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:40:31.255+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:40:31.255+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:40:31.280+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat-2].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2025-08-04T10:40:31.317+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Starting...
2025-08-04T10:40:31.391+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-7 - Added connection org.postgresql.jdbc.PgConnection@59e55170
2025-08-04T10:40:31.392+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Start completed.
2025-08-04T10:40:31.413+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:40:31.430+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:40:31.430+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:40:31.430+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:40:31.430+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:40:31.430+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:40:31.431+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:40:31.431+07:00  WARN 14900 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:40:31.431+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown initiated...
2025-08-04T10:40:31.432+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown completed.
2025-08-04T10:40:31.433+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:40:31.449+07:00 ERROR 14900 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:41:09.985+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:41:09.985+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:41:10.314+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:41:10.315+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:41:10.338+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat-3].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2025-08-04T10:41:10.369+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Starting...
2025-08-04T10:41:10.549+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-8 - Added connection org.postgresql.jdbc.PgConnection@4646e4a6
2025-08-04T10:41:10.549+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Start completed.
2025-08-04T10:41:10.569+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:41:10.587+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:41:10.587+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:41:10.587+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:41:10.587+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:41:10.587+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:41:10.587+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:41:10.588+07:00  WARN 14900 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:41:10.588+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown initiated...
2025-08-04T10:41:10.589+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown completed.
2025-08-04T10:41:10.589+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:41:10.599+07:00 ERROR 14900 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:41:20.341+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:41:20.341+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:41:20.776+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:41:20.777+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:41:20.812+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat-4].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2025-08-04T10:41:20.849+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Starting...
2025-08-04T10:41:20.921+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-9 - Added connection org.postgresql.jdbc.PgConnection@478f6fe6
2025-08-04T10:41:20.921+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Start completed.
2025-08-04T10:41:20.940+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:41:20.961+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:41:20.961+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:41:20.961+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:41:20.961+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:41:20.961+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:41:20.962+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:41:20.962+07:00  WARN 14900 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:41:20.963+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown initiated...
2025-08-04T10:41:20.964+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown completed.
2025-08-04T10:41:20.964+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:41:20.975+07:00 ERROR 14900 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:41:56.735+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:41:56.735+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:41:57.119+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:41:57.120+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:41:57.147+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat-5].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2025-08-04T10:41:57.180+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Starting...
2025-08-04T10:41:57.356+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-10 - Added connection org.postgresql.jdbc.PgConnection@6dfe1d66
2025-08-04T10:41:57.356+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Start completed.
2025-08-04T10:41:57.374+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:41:57.387+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:41:57.388+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:41:57.388+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:41:57.388+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:41:57.388+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:41:57.388+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:41:57.388+07:00  WARN 14900 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:41:57.388+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown initiated...
2025-08-04T10:41:57.389+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown completed.
2025-08-04T10:41:57.390+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:41:57.399+07:00 ERROR 14900 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:42:05.044+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:42:05.044+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:42:05.385+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:42:05.385+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:42:05.409+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat-6].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2025-08-04T10:42:05.440+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Starting...
2025-08-04T10:42:05.504+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-11 - Added connection org.postgresql.jdbc.PgConnection@4474e427
2025-08-04T10:42:05.504+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Start completed.
2025-08-04T10:42:05.522+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:42:05.536+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:42:05.536+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:42:05.536+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:42:05.536+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:42:05.536+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:42:05.536+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:42:05.537+07:00  WARN 14900 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:42:05.537+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown initiated...
2025-08-04T10:42:05.538+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown completed.
2025-08-04T10:42:05.538+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:42:05.550+07:00 ERROR 14900 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:42:10.164+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:42:10.164+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:42:10.517+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:42:10.517+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:42:10.540+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat-7].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2025-08-04T10:42:10.572+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Starting...
2025-08-04T10:42:10.642+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-12 - Added connection org.postgresql.jdbc.PgConnection@798710c6
2025-08-04T10:42:10.642+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Start completed.
2025-08-04T10:42:10.659+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:42:10.672+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:42:10.673+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:42:10.673+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:42:10.673+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:42:10.673+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:42:10.673+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:42:10.673+07:00  WARN 14900 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:42:10.673+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Shutdown initiated...
2025-08-04T10:42:10.674+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Shutdown completed.
2025-08-04T10:42:10.674+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:42:10.685+07:00 ERROR 14900 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:42:16.240+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:42:16.240+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:42:16.587+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:42:16.587+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:42:16.612+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat-8].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2025-08-04T10:42:16.646+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Starting...
2025-08-04T10:42:16.831+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-13 - Added connection org.postgresql.jdbc.PgConnection@8d2a53a
2025-08-04T10:42:16.831+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Start completed.
2025-08-04T10:42:16.848+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:42:16.862+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:42:16.862+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:42:16.862+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:42:16.862+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:42:16.862+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:42:16.863+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:42:16.863+07:00  WARN 14900 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:42:16.863+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown initiated...
2025-08-04T10:42:16.864+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown completed.
2025-08-04T10:42:16.864+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:42:16.874+07:00 ERROR 14900 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:42:21.411+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:42:21.411+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:42:21.742+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:42:21.742+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:42:21.773+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat-9].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2025-08-04T10:42:21.808+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Starting...
2025-08-04T10:42:21.874+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-14 - Added connection org.postgresql.jdbc.PgConnection@44a4006e
2025-08-04T10:42:21.874+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Start completed.
2025-08-04T10:42:21.892+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:42:21.906+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:42:21.906+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:42:21.906+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:42:21.906+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:42:21.906+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:42:21.906+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:42:21.907+07:00  WARN 14900 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:42:21.907+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Shutdown initiated...
2025-08-04T10:42:21.908+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Shutdown completed.
2025-08-04T10:42:21.908+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:42:21.919+07:00 ERROR 14900 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:42:33.720+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:42:33.720+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:42:34.043+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:42:34.043+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:42:34.065+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat-10].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2025-08-04T10:42:34.096+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Starting...
2025-08-04T10:42:34.165+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-15 - Added connection org.postgresql.jdbc.PgConnection@685e90e4
2025-08-04T10:42:34.165+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Start completed.
2025-08-04T10:42:34.185+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:42:34.197+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:42:34.198+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:42:34.198+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:42:34.198+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:42:34.198+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:42:34.198+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:42:34.198+07:00  WARN 14900 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:42:34.198+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Shutdown initiated...
2025-08-04T10:42:34.199+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-15 - Shutdown completed.
2025-08-04T10:42:34.200+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:42:34.209+07:00 ERROR 14900 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:42:51.179+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:42:51.180+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:42:51.575+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:42:51.575+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:42:51.598+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat-11].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2025-08-04T10:42:51.631+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Starting...
2025-08-04T10:42:51.697+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-16 - Added connection org.postgresql.jdbc.PgConnection@700a8924
2025-08-04T10:42:51.698+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Start completed.
2025-08-04T10:42:51.715+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:42:51.728+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:42:51.728+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:42:51.728+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:42:51.728+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:42:51.728+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:42:51.728+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:42:51.729+07:00  WARN 14900 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:42:51.729+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Shutdown initiated...
2025-08-04T10:42:51.729+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-16 - Shutdown completed.
2025-08-04T10:42:51.730+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:42:51.739+07:00 ERROR 14900 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:43:07.603+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:43:07.603+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:43:07.991+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:43:07.991+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:43:08.016+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat-12].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2025-08-04T10:43:08.066+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Starting...
2025-08-04T10:43:08.245+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-17 - Added connection org.postgresql.jdbc.PgConnection@a5f499e
2025-08-04T10:43:08.245+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Start completed.
2025-08-04T10:43:08.264+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:43:08.285+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:43:08.285+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:43:08.285+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:43:08.285+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:43:08.285+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:43:08.285+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:43:08.286+07:00  WARN 14900 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:43:08.286+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Shutdown initiated...
2025-08-04T10:43:08.287+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-17 - Shutdown completed.
2025-08-04T10:43:08.287+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:43:08.298+07:00 ERROR 14900 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:43:16.976+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:43:16.977+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:43:17.543+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:43:17.543+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:43:17.575+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat-13].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2025-08-04T10:43:17.618+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Starting...
2025-08-04T10:43:17.705+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-18 - Added connection org.postgresql.jdbc.PgConnection@47d5a84c
2025-08-04T10:43:17.705+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Start completed.
2025-08-04T10:43:17.732+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:43:17.757+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:43:17.757+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:43:17.757+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:43:17.757+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:43:17.757+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:43:17.757+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:43:17.758+07:00  WARN 14900 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:43:17.758+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Shutdown initiated...
2025-08-04T10:43:17.759+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-18 - Shutdown completed.
2025-08-04T10:43:17.760+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:43:17.778+07:00 ERROR 14900 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:43:23.374+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14900 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:43:23.374+07:00  INFO 14900 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:43:23.709+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:43:23.710+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:43:23.732+07:00  INFO 14900 --- [restartedMain] o.a.c.c.C.[Tomcat-14].[localhost].[/]    : Initializing Spring embedded WebApplicationContext
2025-08-04T10:43:23.761+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Starting...
2025-08-04T10:43:23.830+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-19 - Added connection org.postgresql.jdbc.PgConnection@7fac5508
2025-08-04T10:43:23.830+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Start completed.
2025-08-04T10:43:23.848+07:00  INFO 14900 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:43:23.861+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:43:23.861+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:43:23.861+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:43:23.861+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:43:23.861+07:00  INFO 14900 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:43:23.862+07:00  INFO 14900 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:43:23.862+07:00  WARN 14900 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:43:23.862+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Shutdown initiated...
2025-08-04T10:43:23.863+07:00  INFO 14900 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-19 - Shutdown completed.
2025-08-04T10:43:23.863+07:00  INFO 14900 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:43:23.874+07:00 ERROR 14900 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:43:50.294+07:00  INFO 6168 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 6168 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:43:50.299+07:00  INFO 6168 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:43:52.421+07:00  INFO 6168 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:43:52.421+07:00  INFO 6168 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:43:52.485+07:00  INFO 6168 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T10:43:52.686+07:00  INFO 6168 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:43:52.935+07:00  INFO 6168 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@36ccf4f8
2025-08-04T10:43:52.937+07:00  INFO 6168 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:43:53.250+07:00  INFO 6168 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:43:53.619+07:00  INFO 6168 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:43:53.619+07:00  INFO 6168 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:43:53.619+07:00  INFO 6168 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:43:53.619+07:00  INFO 6168 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:43:53.619+07:00  INFO 6168 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:43:53.619+07:00  INFO 6168 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:43:53.622+07:00  WARN 6168 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:43:53.623+07:00  INFO 6168 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:43:53.685+07:00  INFO 6168 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:43:53.692+07:00  INFO 6168 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:43:53.738+07:00 ERROR 6168 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:44:26.198+07:00  INFO 14140 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14140 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:44:26.201+07:00  INFO 14140 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:44:28.111+07:00  INFO 14140 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:44:28.112+07:00  INFO 14140 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:44:28.191+07:00  INFO 14140 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T10:44:28.349+07:00  INFO 14140 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:44:28.558+07:00  INFO 14140 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2c7bd01a
2025-08-04T10:44:28.560+07:00  INFO 14140 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:44:28.778+07:00  INFO 14140 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:44:29.088+07:00  INFO 14140 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:44:29.088+07:00  INFO 14140 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:44:29.088+07:00  INFO 14140 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  ChangeLogParseException
2025-08-04T10:44:29.088+07:00  INFO 14140 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:44:29.088+07:00  INFO 14140 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  4.27.0
2025-08-04T10:44:29.088+07:00  INFO 14140 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:44:29.090+07:00  WARN 14140 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
2025-08-04T10:44:29.091+07:00  INFO 14140 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:44:29.201+07:00  INFO 14140 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:44:29.205+07:00  INFO 14140 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:44:29.245+07:00 ERROR 14140 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.ChangeLogParseException: 
Unexpected formatting in formatted changelog 'classpath:db/changelog/changelog.sql' at line 3.
Formatted SQL changelogs require known formats, such as '--changeset <authorname>:<changesetId>' and others to be recognized and run.
Learn all the options at https://docs.liquibase.com/concepts/changelogs/sql-format.html
	at liquibase.parser.AbstractFormattedChangeLogParser.parse(AbstractFormattedChangeLogParser.java:470) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.lambda$getDatabaseChangeLog$0(DatabaseChangelogCommandStep.java:129) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:175) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.getDatabaseChangeLog(DatabaseChangelogCommandStep.java:128) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.helpers.DatabaseChangelogCommandStep.run(DatabaseChangelogCommandStep.java:87) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted

2025-08-04T10:48:40.213+07:00  INFO 11208 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 11208 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:48:40.217+07:00  INFO 11208 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:48:43.879+07:00  INFO 11208 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:48:43.879+07:00  INFO 11208 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:48:43.957+07:00  INFO 11208 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T10:48:44.151+07:00  INFO 11208 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:48:44.395+07:00  INFO 11208 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3fd3bc0b
2025-08-04T10:48:44.403+07:00  INFO 11208 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:48:44.645+07:00  INFO 11208 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:48:45.064+07:00  INFO 11208 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:48:45.173+07:00  INFO 11208 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T10:48:45.175+07:00  INFO 11208 --- [restartedMain] liquibase.command                        : Using deploymentId: 4279325174
2025-08-04T10:48:45.177+07:00  INFO 11208 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:48:45.185+07:00  INFO 11208 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::1-procedure_create_role_with_permission::minh
2025-08-04T10:48:45.208+07:00 ERROR 11208 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::1-procedure_create_role_with_permission::minh encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T10:48:45.228+07:00  INFO 11208 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:48:45.228+07:00  INFO 11208 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T10:48:45.228+07:00  INFO 11208 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T10:48:45.228+07:00  INFO 11208 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T10:48:45.228+07:00  INFO 11208 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T10:48:45.228+07:00  INFO 11208 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T10:48:45.230+07:00  INFO 11208 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T10:48:45.234+07:00  INFO 11208 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T10:48:45.239+07:00  INFO 11208 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:48:45.243+07:00  INFO 11208 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:48:45.244+07:00  INFO 11208 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:48:45.244+07:00  INFO 11208 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T10:48:45.244+07:00  INFO 11208 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$
2025-08-04T10:48:45.244+07:00  INFO 11208 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T10:48:45.245+07:00  INFO 11208 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:48:45.247+07:00  WARN 11208 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1-procedure_create_role_with_permission::minh:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
2025-08-04T10:48:45.248+07:00  INFO 11208 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:48:45.360+07:00  INFO 11208 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:48:45.365+07:00  INFO 11208 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:48:45.415+07:00 ERROR 11208 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1-procedure_create_role_with_permission::minh:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1-procedure_create_role_with_permission::minh:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1-procedure_create_role_with_permission::minh:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1-procedure_create_role_with_permission::minh:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1-procedure_create_role_with_permission::minh:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1-procedure_create_role_with_permission::minh:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T10:50:25.024+07:00  INFO 18228 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 18228 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T10:50:25.028+07:00  INFO 18228 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T10:50:27.085+07:00  INFO 18228 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T10:50:27.085+07:00  INFO 18228 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T10:50:27.163+07:00  INFO 18228 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T10:50:27.354+07:00  INFO 18228 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T10:50:27.593+07:00  INFO 18228 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4aac7ba2
2025-08-04T10:50:27.595+07:00  INFO 18228 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T10:50:27.818+07:00  INFO 18228 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T10:50:28.261+07:00  INFO 18228 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:50:28.336+07:00  INFO 18228 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T10:50:28.337+07:00  INFO 18228 --- [restartedMain] liquibase.command                        : Using deploymentId: 4279428337
2025-08-04T10:50:28.339+07:00  INFO 18228 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T10:50:28.346+07:00  INFO 18228 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::1::minh
2025-08-04T10:50:28.372+07:00 ERROR 18228 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::1::minh encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T10:50:28.388+07:00  INFO 18228 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T10:50:28.388+07:00  INFO 18228 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T10:50:28.389+07:00  INFO 18228 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T10:50:28.389+07:00  INFO 18228 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T10:50:28.389+07:00  INFO 18228 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T10:50:28.389+07:00  INFO 18228 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T10:50:28.390+07:00  INFO 18228 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T10:50:28.392+07:00  INFO 18228 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T10:50:28.395+07:00  INFO 18228 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T10:50:28.397+07:00  INFO 18228 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T10:50:28.398+07:00  INFO 18228 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T10:50:28.398+07:00  INFO 18228 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T10:50:28.398+07:00  INFO 18228 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$
2025-08-04T10:50:28.398+07:00  INFO 18228 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T10:50:28.398+07:00  INFO 18228 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T10:50:28.400+07:00  WARN 18228 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::minh:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
2025-08-04T10:50:28.400+07:00  INFO 18228 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T10:50:28.459+07:00  INFO 18228 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T10:50:28.462+07:00  INFO 18228 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T10:50:28.512+07:00 ERROR 18228 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::minh:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::minh:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::minh:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::minh:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::minh:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::minh:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_roleName text,
    i_description text,
    i_permissions text[]
)
    language plpgsql
as
$$
declare
    role_id            bigint. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:00:10.325+07:00  INFO 14652 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14652 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T11:00:10.329+07:00  INFO 14652 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T11:00:12.380+07:00  INFO 14652 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T11:00:12.380+07:00  INFO 14652 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T11:00:12.442+07:00  INFO 14652 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T11:00:12.599+07:00  INFO 14652 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T11:00:12.937+07:00  INFO 14652 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@57177f8d
2025-08-04T11:00:12.939+07:00  INFO 14652 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T11:00:13.156+07:00  INFO 14652 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T11:00:13.565+07:00  INFO 14652 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:00:13.647+07:00  INFO 14652 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T11:00:13.648+07:00  INFO 14652 --- [restartedMain] liquibase.command                        : Using deploymentId: 4280013648
2025-08-04T11:00:13.650+07:00  INFO 14652 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:00:13.657+07:00  INFO 14652 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::001-create-procedure::wabi
2025-08-04T11:00:13.677+07:00 ERROR 14652 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::001-create-procedure::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:00:13.695+07:00  INFO 14652 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T11:00:13.696+07:00  INFO 14652 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T11:00:13.696+07:00  INFO 14652 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T11:00:13.696+07:00  INFO 14652 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T11:00:13.696+07:00  INFO 14652 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T11:00:13.696+07:00  INFO 14652 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T11:00:13.698+07:00  INFO 14652 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T11:00:13.701+07:00  INFO 14652 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T11:00:13.703+07:00  INFO 14652 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T11:00:13.705+07:00  INFO 14652 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T11:00:13.706+07:00  INFO 14652 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T11:00:13.706+07:00  INFO 14652 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T11:00:13.706+07:00  INFO 14652 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$
2025-08-04T11:00:13.706+07:00  INFO 14652 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T11:00:13.706+07:00  INFO 14652 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T11:00:13.707+07:00  WARN 14652 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
2025-08-04T11:00:13.708+07:00  INFO 14652 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T11:00:13.824+07:00  INFO 14652 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T11:00:13.828+07:00  INFO 14652 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T11:00:13.877+07:00 ERROR 14652 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:01:05.654+07:00  INFO 4272 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 4272 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T11:01:05.656+07:00  INFO 4272 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T11:01:08.062+07:00  INFO 4272 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T11:01:08.062+07:00  INFO 4272 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T11:01:08.135+07:00  INFO 4272 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T11:01:08.316+07:00  INFO 4272 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T11:01:08.544+07:00  INFO 4272 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@210c28af
2025-08-04T11:01:08.546+07:00  INFO 4272 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T11:01:08.860+07:00  INFO 4272 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T11:01:09.360+07:00  INFO 4272 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:01:09.442+07:00  INFO 4272 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T11:01:09.444+07:00  INFO 4272 --- [restartedMain] liquibase.command                        : Using deploymentId: 4280069444
2025-08-04T11:01:09.446+07:00  INFO 4272 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:01:09.452+07:00  INFO 4272 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::1::wabi
2025-08-04T11:01:09.478+07:00 ERROR 4272 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::1::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:01:09.493+07:00  INFO 4272 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T11:01:09.493+07:00  INFO 4272 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T11:01:09.494+07:00  INFO 4272 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T11:01:09.494+07:00  INFO 4272 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T11:01:09.494+07:00  INFO 4272 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T11:01:09.494+07:00  INFO 4272 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T11:01:09.495+07:00  INFO 4272 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T11:01:09.497+07:00  INFO 4272 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T11:01:09.500+07:00  INFO 4272 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T11:01:09.502+07:00  INFO 4272 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T11:01:09.502+07:00  INFO 4272 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T11:01:09.502+07:00  INFO 4272 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T11:01:09.503+07:00  INFO 4272 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$
2025-08-04T11:01:09.503+07:00  INFO 4272 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T11:01:09.503+07:00  INFO 4272 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T11:01:09.504+07:00  WARN 4272 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
2025-08-04T11:01:09.505+07:00  INFO 4272 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T11:01:09.561+07:00  INFO 4272 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T11:01:09.564+07:00  INFO 4272 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T11:01:09.615+07:00 ERROR 4272 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:05:14.776+07:00  INFO 14276 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14276 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T11:05:14.778+07:00  INFO 14276 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T11:05:16.622+07:00  INFO 14276 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T11:05:16.622+07:00  INFO 14276 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T11:05:16.691+07:00  INFO 14276 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T11:05:16.859+07:00  INFO 14276 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T11:05:17.070+07:00  INFO 14276 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@256eb3d4
2025-08-04T11:05:17.072+07:00  INFO 14276 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T11:05:17.313+07:00  INFO 14276 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T11:05:17.813+07:00  INFO 14276 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:05:17.877+07:00  INFO 14276 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T11:05:17.879+07:00  INFO 14276 --- [restartedMain] liquibase.command                        : Using deploymentId: 4280317878
2025-08-04T11:05:17.881+07:00  INFO 14276 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:05:17.887+07:00  INFO 14276 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::1::wabi
2025-08-04T11:05:17.917+07:00 ERROR 14276 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::1::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:05:17.937+07:00  INFO 14276 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T11:05:17.938+07:00  INFO 14276 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T11:05:17.938+07:00  INFO 14276 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T11:05:17.939+07:00  INFO 14276 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T11:05:17.939+07:00  INFO 14276 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T11:05:17.939+07:00  INFO 14276 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T11:05:17.940+07:00  INFO 14276 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T11:05:17.944+07:00  INFO 14276 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T11:05:17.948+07:00  INFO 14276 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T11:05:17.951+07:00  INFO 14276 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T11:05:17.951+07:00  INFO 14276 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T11:05:17.951+07:00  INFO 14276 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T11:05:17.951+07:00  INFO 14276 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$
2025-08-04T11:05:17.951+07:00  INFO 14276 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T11:05:17.952+07:00  INFO 14276 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T11:05:17.954+07:00  WARN 14276 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
2025-08-04T11:05:17.954+07:00  INFO 14276 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T11:05:18.019+07:00  INFO 14276 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T11:05:18.022+07:00  INFO 14276 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T11:05:18.070+07:00 ERROR 14276 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:06:19.213+07:00  INFO 12192 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 12192 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T11:06:19.216+07:00  INFO 12192 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T11:06:20.992+07:00  INFO 12192 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T11:06:20.992+07:00  INFO 12192 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T11:06:21.060+07:00  INFO 12192 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T11:06:21.224+07:00  INFO 12192 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T11:06:21.429+07:00  INFO 12192 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@2c7bd01a
2025-08-04T11:06:21.431+07:00  INFO 12192 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T11:06:21.644+07:00  INFO 12192 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T11:06:22.064+07:00  INFO 12192 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:06:22.131+07:00  INFO 12192 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T11:06:22.133+07:00  INFO 12192 --- [restartedMain] liquibase.command                        : Using deploymentId: 4280382133
2025-08-04T11:06:22.135+07:00  INFO 12192 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:06:22.142+07:00  INFO 12192 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::1--procedure::wabi
2025-08-04T11:06:22.163+07:00 ERROR 12192 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::1--procedure::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:06:22.182+07:00  INFO 12192 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T11:06:22.182+07:00  INFO 12192 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T11:06:22.182+07:00  INFO 12192 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T11:06:22.182+07:00  INFO 12192 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T11:06:22.182+07:00  INFO 12192 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T11:06:22.182+07:00  INFO 12192 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T11:06:22.183+07:00  INFO 12192 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T11:06:22.185+07:00  INFO 12192 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T11:06:22.189+07:00  INFO 12192 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T11:06:22.191+07:00  INFO 12192 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T11:06:22.191+07:00  INFO 12192 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T11:06:22.191+07:00  INFO 12192 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T11:06:22.191+07:00  INFO 12192 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$
2025-08-04T11:06:22.191+07:00  INFO 12192 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T11:06:22.192+07:00  INFO 12192 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T11:06:22.193+07:00  WARN 12192 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1--procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
2025-08-04T11:06:22.194+07:00  INFO 12192 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T11:06:22.304+07:00  INFO 12192 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T11:06:22.308+07:00  INFO 12192 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T11:06:22.349+07:00 ERROR 12192 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1--procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1--procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1--procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1--procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1--procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1--procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:06:40.365+07:00  INFO 9804 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 9804 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T11:06:40.368+07:00  INFO 9804 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T11:06:42.194+07:00  INFO 9804 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T11:06:42.194+07:00  INFO 9804 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T11:06:42.258+07:00  INFO 9804 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T11:06:42.421+07:00  INFO 9804 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T11:06:42.623+07:00  INFO 9804 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@420925b
2025-08-04T11:06:42.625+07:00  INFO 9804 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T11:06:42.829+07:00  INFO 9804 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T11:06:43.240+07:00  INFO 9804 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:06:43.304+07:00  INFO 9804 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T11:06:43.305+07:00  INFO 9804 --- [restartedMain] liquibase.command                        : Using deploymentId: 4280403305
2025-08-04T11:06:43.308+07:00  INFO 9804 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:06:43.316+07:00  INFO 9804 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::001-create-role-procedure::wabi
2025-08-04T11:06:43.340+07:00 ERROR 9804 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::001-create-role-procedure::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:06:43.364+07:00  INFO 9804 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T11:06:43.365+07:00  INFO 9804 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T11:06:43.365+07:00  INFO 9804 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T11:06:43.365+07:00  INFO 9804 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T11:06:43.365+07:00  INFO 9804 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T11:06:43.365+07:00  INFO 9804 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T11:06:43.366+07:00  INFO 9804 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T11:06:43.369+07:00  INFO 9804 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T11:06:43.377+07:00  INFO 9804 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T11:06:43.379+07:00  INFO 9804 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T11:06:43.380+07:00  INFO 9804 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T11:06:43.380+07:00  INFO 9804 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T11:06:43.380+07:00  INFO 9804 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$
2025-08-04T11:06:43.380+07:00  INFO 9804 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T11:06:43.380+07:00  INFO 9804 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T11:06:43.382+07:00  WARN 9804 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-role-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
2025-08-04T11:06:43.382+07:00  INFO 9804 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T11:06:43.422+07:00  INFO 9804 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T11:06:43.425+07:00  INFO 9804 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T11:06:43.492+07:00 ERROR 9804 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-role-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-role-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-role-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-role-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-role-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-role-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 146 in SQL CREATE OR REPLACE PROCEDURE create_role_with_permission(
    role_name TEXT,
    role_desc TEXT,
    permissions TEXT[]
)
    LANGUAGE plpgsql
AS $$
DECLARE
    role_id BIGINT. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:07:23.095+07:00  INFO 13648 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 13648 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T11:07:23.098+07:00  INFO 13648 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T11:07:25.498+07:00  INFO 13648 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T11:07:25.498+07:00  INFO 13648 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T11:07:25.563+07:00  INFO 13648 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T11:07:25.728+07:00  INFO 13648 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T11:07:25.946+07:00  INFO 13648 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@210c28af
2025-08-04T11:07:25.948+07:00  INFO 13648 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T11:07:26.435+07:00  INFO 13648 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T11:07:27.029+07:00  INFO 13648 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:07:27.151+07:00  INFO 13648 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T11:07:27.153+07:00  INFO 13648 --- [restartedMain] liquibase.command                        : Using deploymentId: 4280447153
2025-08-04T11:07:27.156+07:00  INFO 13648 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:07:27.168+07:00  INFO 13648 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::001-create-role-procedure::wabi
2025-08-04T11:07:27.224+07:00 ERROR 13648 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::001-create-role-procedure::wabi encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 63 in SQL CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 63 in SQL CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:07:27.273+07:00  INFO 13648 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T11:07:27.274+07:00  INFO 13648 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T11:07:27.274+07:00  INFO 13648 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T11:07:27.275+07:00  INFO 13648 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T11:07:27.276+07:00  INFO 13648 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T11:07:27.276+07:00  INFO 13648 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T11:07:27.278+07:00  INFO 13648 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T11:07:27.282+07:00  INFO 13648 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T11:07:27.288+07:00  INFO 13648 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T11:07:27.291+07:00  INFO 13648 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T11:07:27.291+07:00  INFO 13648 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T11:07:27.292+07:00  INFO 13648 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T11:07:27.292+07:00  INFO 13648 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 63 in SQL CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END. Expected terminating $$
2025-08-04T11:07:27.292+07:00  INFO 13648 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T11:07:27.293+07:00  INFO 13648 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T11:07:27.295+07:00  WARN 13648 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-role-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 63 in SQL CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END]
2025-08-04T11:07:27.296+07:00  INFO 13648 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T11:07:27.377+07:00  INFO 13648 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T11:07:27.384+07:00  INFO 13648 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T11:07:27.438+07:00 ERROR 13648 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-role-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 63 in SQL CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-role-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 63 in SQL CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-role-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 63 in SQL CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-role-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 63 in SQL CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-role-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 63 in SQL CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::001-create-role-procedure::wabi:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 63 in SQL CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 63 in SQL CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END. Expected terminating $$ [Failed SQL: (0) CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 63 in SQL CREATE OR REPLACE PROCEDURE getall(

)
    LANGUAGE plpgsql
AS $$

BEGIN
    select * from permissions ;
END. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:08:20.141+07:00  INFO 12020 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 12020 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T11:08:20.144+07:00  INFO 12020 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T11:08:21.937+07:00  INFO 12020 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T11:08:21.938+07:00  INFO 12020 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T11:08:22.001+07:00  INFO 12020 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T11:08:22.154+07:00  INFO 12020 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T11:08:22.359+07:00  INFO 12020 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4bb7462b
2025-08-04T11:08:22.361+07:00  INFO 12020 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T11:08:22.564+07:00  INFO 12020 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T11:08:22.975+07:00  INFO 12020 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:08:23.005+07:00  INFO 12020 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T11:08:23.007+07:00  INFO 12020 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:08:23.015+07:00  INFO 12020 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T11:08:23.015+07:00  INFO 12020 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T11:08:23.015+07:00  INFO 12020 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T11:08:23.015+07:00  INFO 12020 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T11:08:23.015+07:00  INFO 12020 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T11:08:23.015+07:00  INFO 12020 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T11:08:23.016+07:00  INFO 12020 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T11:08:23.073+07:00  INFO 12020 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T11:08:23.075+07:00  INFO 12020 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T11:08:23.195+07:00  INFO 12020 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T11:08:23.329+07:00  INFO 12020 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T11:08:23.388+07:00  INFO 12020 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T11:08:23.909+07:00  WARN 12020 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T11:08:25.163+07:00  INFO 12020 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T11:08:25.700+07:00  WARN 12020 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T11:08:26.446+07:00  INFO 12020 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 7.101 seconds (process running for 8.534)
2025-08-04T11:11:20.303+07:00  INFO 12020 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T11:11:20.315+07:00  INFO 12020 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T11:21:36.916+07:00  INFO 6052 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 6052 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T11:21:36.918+07:00  INFO 6052 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T11:21:38.771+07:00  INFO 6052 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T11:21:38.771+07:00  INFO 6052 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T11:21:38.839+07:00  INFO 6052 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T11:21:39.016+07:00  INFO 6052 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T11:21:39.360+07:00  INFO 6052 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@70f2abac
2025-08-04T11:21:39.362+07:00  INFO 6052 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T11:21:39.629+07:00  INFO 6052 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T11:21:40.199+07:00  INFO 6052 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:21:40.281+07:00  INFO 6052 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T11:21:40.282+07:00  INFO 6052 --- [restartedMain] liquibase.command                        : Using deploymentId: 4281300282
2025-08-04T11:21:40.285+07:00  INFO 6052 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:21:40.292+07:00  INFO 6052 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::1::procedure
2025-08-04T11:21:40.319+07:00 ERROR 6052 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::1::procedure encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:21:40.339+07:00  INFO 6052 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T11:21:40.339+07:00  INFO 6052 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T11:21:40.339+07:00  INFO 6052 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T11:21:40.339+07:00  INFO 6052 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T11:21:40.339+07:00  INFO 6052 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T11:21:40.339+07:00  INFO 6052 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T11:21:40.341+07:00  INFO 6052 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T11:21:40.344+07:00  INFO 6052 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T11:21:40.348+07:00  INFO 6052 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T11:21:40.351+07:00  INFO 6052 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T11:21:40.352+07:00  INFO 6052 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T11:21:40.352+07:00  INFO 6052 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T11:21:40.352+07:00  INFO 6052 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
2025-08-04T11:21:40.352+07:00  INFO 6052 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T11:21:40.353+07:00  INFO 6052 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T11:21:40.355+07:00  WARN 6052 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
2025-08-04T11:21:40.356+07:00  INFO 6052 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T11:21:40.437+07:00  INFO 6052 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T11:21:40.441+07:00  INFO 6052 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T11:21:40.491+07:00 ERROR 6052 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:27:21.793+07:00  INFO 1784 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 1784 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T11:27:21.796+07:00  INFO 1784 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T11:27:23.899+07:00  INFO 1784 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T11:27:23.900+07:00  INFO 1784 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T11:27:23.981+07:00  INFO 1784 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T11:27:24.138+07:00  INFO 1784 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T11:27:24.449+07:00  INFO 1784 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5be3f13f
2025-08-04T11:27:24.459+07:00  INFO 1784 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T11:27:24.670+07:00  INFO 1784 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T11:27:25.133+07:00  INFO 1784 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:27:25.214+07:00  INFO 1784 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T11:27:25.216+07:00  INFO 1784 --- [restartedMain] liquibase.command                        : Using deploymentId: 4281645216
2025-08-04T11:27:25.220+07:00  INFO 1784 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:27:25.230+07:00  INFO 1784 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::1::procedure
2025-08-04T11:27:25.260+07:00 ERROR 1784 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::1::procedure encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:27:25.277+07:00  INFO 1784 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T11:27:25.277+07:00  INFO 1784 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T11:27:25.277+07:00  INFO 1784 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T11:27:25.277+07:00  INFO 1784 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T11:27:25.277+07:00  INFO 1784 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T11:27:25.277+07:00  INFO 1784 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T11:27:25.279+07:00  INFO 1784 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T11:27:25.281+07:00  INFO 1784 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T11:27:25.284+07:00  INFO 1784 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T11:27:25.286+07:00  INFO 1784 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T11:27:25.286+07:00  INFO 1784 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T11:27:25.286+07:00  INFO 1784 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T11:27:25.286+07:00  INFO 1784 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
2025-08-04T11:27:25.286+07:00  INFO 1784 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T11:27:25.286+07:00  INFO 1784 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T11:27:25.287+07:00  WARN 1784 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
2025-08-04T11:27:25.288+07:00  INFO 1784 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T11:27:25.295+07:00  INFO 1784 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T11:27:25.299+07:00  INFO 1784 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T11:27:25.342+07:00 ERROR 1784 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:29:04.255+07:00  INFO 2224 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 2224 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T11:29:04.260+07:00  INFO 2224 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T11:29:06.607+07:00  INFO 2224 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T11:29:06.608+07:00  INFO 2224 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T11:29:06.676+07:00  INFO 2224 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T11:29:06.845+07:00  INFO 2224 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T11:29:07.068+07:00  INFO 2224 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@aa6bb9
2025-08-04T11:29:07.071+07:00  INFO 2224 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T11:29:07.406+07:00  INFO 2224 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T11:29:07.974+07:00  INFO 2224 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:29:08.050+07:00  INFO 2224 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T11:29:08.051+07:00  INFO 2224 --- [restartedMain] liquibase.command                        : Using deploymentId: 4281748051
2025-08-04T11:29:08.053+07:00  INFO 2224 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:29:08.060+07:00  INFO 2224 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::1::procedure
2025-08-04T11:29:08.101+07:00 ERROR 2224 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::1::procedure encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:29:08.119+07:00  INFO 2224 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T11:29:08.119+07:00  INFO 2224 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T11:29:08.119+07:00  INFO 2224 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T11:29:08.120+07:00  INFO 2224 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T11:29:08.120+07:00  INFO 2224 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T11:29:08.120+07:00  INFO 2224 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T11:29:08.121+07:00  INFO 2224 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T11:29:08.123+07:00  INFO 2224 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T11:29:08.127+07:00  INFO 2224 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T11:29:08.129+07:00  INFO 2224 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T11:29:08.129+07:00  INFO 2224 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T11:29:08.129+07:00  INFO 2224 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T11:29:08.129+07:00  INFO 2224 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
2025-08-04T11:29:08.129+07:00  INFO 2224 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T11:29:08.130+07:00  INFO 2224 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T11:29:08.132+07:00  WARN 2224 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
2025-08-04T11:29:08.132+07:00  INFO 2224 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T11:29:08.202+07:00  INFO 2224 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T11:29:08.207+07:00  INFO 2224 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T11:29:08.251+07:00 ERROR 2224 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:29:45.033+07:00  INFO 8392 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 8392 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T11:29:45.036+07:00  INFO 8392 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T11:29:47.579+07:00  INFO 8392 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T11:29:47.580+07:00  INFO 8392 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T11:29:47.775+07:00  INFO 8392 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T11:29:47.991+07:00  INFO 8392 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T11:29:48.342+07:00  INFO 8392 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@aa6bb9
2025-08-04T11:29:48.344+07:00  INFO 8392 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T11:29:48.607+07:00  INFO 8392 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T11:29:49.031+07:00  INFO 8392 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:29:49.096+07:00  INFO 8392 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T11:29:49.096+07:00  INFO 8392 --- [restartedMain] liquibase.command                        : Using deploymentId: 4281789096
2025-08-04T11:29:49.098+07:00  INFO 8392 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:29:49.105+07:00  INFO 8392 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::1::procedure
2025-08-04T11:29:49.130+07:00 ERROR 8392 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::1::procedure encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:29:49.181+07:00  INFO 8392 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T11:29:49.181+07:00  INFO 8392 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T11:29:49.182+07:00  INFO 8392 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T11:29:49.182+07:00  INFO 8392 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T11:29:49.182+07:00  INFO 8392 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T11:29:49.182+07:00  INFO 8392 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T11:29:49.183+07:00  INFO 8392 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T11:29:49.185+07:00  INFO 8392 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T11:29:49.189+07:00  INFO 8392 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T11:29:49.191+07:00  INFO 8392 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T11:29:49.192+07:00  INFO 8392 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T11:29:49.192+07:00  INFO 8392 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T11:29:49.192+07:00  INFO 8392 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
2025-08-04T11:29:49.192+07:00  INFO 8392 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T11:29:49.192+07:00  INFO 8392 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T11:29:49.194+07:00  WARN 8392 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
2025-08-04T11:29:49.194+07:00  INFO 8392 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T11:29:49.244+07:00  INFO 8392 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T11:29:49.251+07:00  INFO 8392 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T11:29:49.385+07:00 ERROR 8392 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:30:22.827+07:00  INFO 16928 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 16928 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T11:30:22.830+07:00  INFO 16928 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T11:30:24.905+07:00  INFO 16928 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T11:30:24.905+07:00  INFO 16928 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T11:30:24.982+07:00  INFO 16928 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T11:30:25.191+07:00  INFO 16928 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T11:30:25.407+07:00  INFO 16928 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6c17e1ad
2025-08-04T11:30:25.409+07:00  INFO 16928 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T11:30:25.635+07:00  INFO 16928 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T11:30:26.021+07:00  INFO 16928 --- [restartedMain] liquibase.changelog                      : Creating database history table with name: public.databasechangelog
2025-08-04T11:30:26.088+07:00  INFO 16928 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:30:26.163+07:00  INFO 16928 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T11:30:26.164+07:00  INFO 16928 --- [restartedMain] liquibase.command                        : Using deploymentId: 4281826164
2025-08-04T11:30:26.167+07:00  INFO 16928 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:30:26.173+07:00  INFO 16928 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::1::procedure
2025-08-04T11:30:26.196+07:00 ERROR 16928 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::1::procedure encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:30:26.210+07:00  INFO 16928 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T11:30:26.210+07:00  INFO 16928 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T11:30:26.211+07:00  INFO 16928 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T11:30:26.211+07:00  INFO 16928 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T11:30:26.211+07:00  INFO 16928 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T11:30:26.211+07:00  INFO 16928 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T11:30:26.212+07:00  INFO 16928 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T11:30:26.215+07:00  INFO 16928 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T11:30:26.219+07:00  INFO 16928 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T11:30:26.222+07:00  INFO 16928 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T11:30:26.222+07:00  INFO 16928 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T11:30:26.222+07:00  INFO 16928 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T11:30:26.222+07:00  INFO 16928 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
2025-08-04T11:30:26.223+07:00  INFO 16928 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T11:30:26.223+07:00  INFO 16928 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T11:30:26.226+07:00  WARN 16928 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
2025-08-04T11:30:26.226+07:00  INFO 16928 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T11:30:26.341+07:00  INFO 16928 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T11:30:26.344+07:00  INFO 16928 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T11:30:26.385+07:00 ERROR 16928 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:32:03.034+07:00  INFO 4524 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 4524 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T11:32:03.037+07:00  INFO 4524 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T11:32:05.239+07:00  INFO 4524 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T11:32:05.239+07:00  INFO 4524 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T11:32:05.321+07:00  INFO 4524 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T11:32:05.491+07:00  INFO 4524 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T11:32:05.720+07:00  INFO 4524 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@420925b
2025-08-04T11:32:05.724+07:00  INFO 4524 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T11:32:05.975+07:00  INFO 4524 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T11:32:06.402+07:00  INFO 4524 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:32:06.468+07:00  INFO 4524 --- [restartedMain] liquibase.lockservice                    : Successfully acquired change log lock
2025-08-04T11:32:06.470+07:00  INFO 4524 --- [restartedMain] liquibase.command                        : Using deploymentId: 4281926470
2025-08-04T11:32:06.472+07:00  INFO 4524 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:32:06.480+07:00  INFO 4524 --- [restartedMain] liquibase.ui                             : Running Changeset: db/changelog/changelog.sql::1::procedure
2025-08-04T11:32:06.513+07:00 ERROR 4524 --- [restartedMain] liquibase.changelog                      : ChangeSet db/changelog/changelog.sql::1::procedure encountered an exception.

liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:32:06.529+07:00  INFO 4524 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T11:32:06.529+07:00  INFO 4524 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T11:32:06.529+07:00  INFO 4524 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T11:32:06.529+07:00  INFO 4524 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T11:32:06.529+07:00  INFO 4524 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T11:32:06.529+07:00  INFO 4524 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T11:32:06.531+07:00  INFO 4524 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T11:32:06.534+07:00  INFO 4524 --- [restartedMain] liquibase.command                        : Update command encountered an exception.
2025-08-04T11:32:06.538+07:00  INFO 4524 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T11:32:06.540+07:00  INFO 4524 --- [restartedMain] liquibase.command                        : Logging exception.
2025-08-04T11:32:06.540+07:00  INFO 4524 --- [restartedMain] liquibase.ui                             : ERROR: Exception Details
2025-08-04T11:32:06.540+07:00  INFO 4524 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Class:  PSQLException
2025-08-04T11:32:06.540+07:00  INFO 4524 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Reason:  Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
2025-08-04T11:32:06.540+07:00  INFO 4524 --- [restartedMain] liquibase.ui                             : ERROR: Exception Primary Source:  PostgreSQL 17.5
2025-08-04T11:32:06.541+07:00  INFO 4524 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T11:32:06.543+07:00  WARN 4524 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
2025-08-04T11:32:06.543+07:00  INFO 4524 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T11:32:06.610+07:00  INFO 4524 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T11:32:06.613+07:00  INFO 4524 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T11:32:06.669+07:00 ERROR 4524 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Failed to initialize dependency 'liquibase' of LoadTimeWeaverAware bean 'entityManagerFactory': Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:326) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'liquibase' defined in class path resource [org/springframework/boot/autoconfigure/liquibase/LiquibaseAutoConfiguration$LiquibaseConfiguration.class]: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:313) ~[spring-beans-6.1.10.jar:6.1.10]
	... 15 common frames omitted
Caused by: liquibase.exception.UnexpectedLiquibaseException: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:259) ~[liquibase-core-4.27.0.jar:na]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 22 common frames omitted
Caused by: liquibase.exception.CommandExecutionException: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.command.CommandScope.execute(CommandScope.java:257) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.lambda$update$0(Liquibase.java:245) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.runInScope(Liquibase.java:1436) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:234) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Liquibase.update(Liquibase.java:212) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.performUpdate(SpringLiquibase.java:297) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.lambda$afterPropertiesSet$0(SpringLiquibase.java:249) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.integration.spring.SpringLiquibase.afterPropertiesSet(SpringLiquibase.java:242) ~[liquibase-core-4.27.0.jar:na]
	... 24 common frames omitted
Caused by: liquibase.exception.LiquibaseException: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:151) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.lambda$run$0(AbstractUpdateCommandStep.java:112) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.AbstractUpdateCommandStep.run(AbstractUpdateCommandStep.java:110) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.core.UpdateCommandStep.run(UpdateCommandStep.java:105) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.command.CommandScope.execute(CommandScope.java:219) ~[liquibase-core-4.27.0.jar:na]
	... 40 common frames omitted
Caused by: liquibase.exception.MigrationFailedException: Migration failed for changeset db/changelog/changelog.sql::1::procedure:
     Reason: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:808) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.executeAcceptedChange(UpdateVisitor.java:119) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.visitor.UpdateVisitor.visit(UpdateVisitor.java:68) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.lambda$run$0(ChangeLogIterator.java:133) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator$2.run(ChangeLogIterator.java:122) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.lambda$child$0(Scope.java:190) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:199) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:189) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:168) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:256) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.Scope.child(Scope.java:260) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeLogIterator.run(ChangeLogIterator.java:89) ~[liquibase-core-4.27.0.jar:na]
	... 48 common frames omitted
Caused by: liquibase.exception.DatabaseException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$ [Failed SQL: (0) create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:473) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:80) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor.execute(JdbcExecutor.java:182) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.executor.AbstractExecutor.execute(AbstractExecutor.java:141) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.database.AbstractJdbcDatabase.executeStatements(AbstractJdbcDatabase.java:1176) ~[liquibase-core-4.27.0.jar:na]
	at liquibase.changelog.ChangeSet.execute(ChangeSet.java:764) ~[liquibase-core-4.27.0.jar:na]
	... 63 common frames omitted
Caused by: org.postgresql.util.PSQLException: Unterminated dollar quote started at position 153 in SQL create or replace procedure create_role_with_permission(
    i_role_name text,
    i_description text,
    i_permission text[]
)
    language plpgsql
as
$$
declare
    v_role_id       text. Expected terminating $$
	at org.postgresql.core.Parser.checkParsePosition(Parser.java:1435) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.parseSql(Parser.java:1334) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.Parser.replaceProcessing(Parser.java:1286) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.CachedQueryCreateAction.create(CachedQueryCreateAction.java:43) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.core.QueryExecutorBase.createQueryByKey(QueryExecutorBase.java:369) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeCachedSql(PgStatement.java:318) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.executeWithFlags(PgStatement.java:302) ~[postgresql-42.7.3.jar:42.7.3]
	at org.postgresql.jdbc.PgStatement.execute(PgStatement.java:297) ~[postgresql-42.7.3.jar:42.7.3]
	at com.zaxxer.hikari.pool.ProxyStatement.execute(ProxyStatement.java:94) ~[HikariCP-5.1.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyStatement.execute(HikariProxyStatement.java) ~[HikariCP-5.1.0.jar:na]
	at liquibase.executor.jvm.JdbcExecutor$ExecuteStatementCallback.doInStatement(JdbcExecutor.java:467) ~[liquibase-core-4.27.0.jar:na]
	... 68 common frames omitted

2025-08-04T11:33:21.054+07:00  INFO 14880 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 14880 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T11:33:21.058+07:00  INFO 14880 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T11:33:23.559+07:00  INFO 14880 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T11:33:23.559+07:00  INFO 14880 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T11:33:23.629+07:00  INFO 14880 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T11:33:23.810+07:00  INFO 14880 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T11:33:24.150+07:00  INFO 14880 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@6df28236
2025-08-04T11:33:24.152+07:00  INFO 14880 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T11:33:24.365+07:00  INFO 14880 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T11:33:24.762+07:00  INFO 14880 --- [restartedMain] liquibase.changelog                      : Creating database history table with name: public.databasechangelog
2025-08-04T11:33:24.823+07:00  INFO 14880 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:33:24.887+07:00  INFO 14880 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T11:33:24.890+07:00  INFO 14880 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T11:33:24.898+07:00  INFO 14880 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T11:33:24.898+07:00  INFO 14880 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T11:33:24.898+07:00  INFO 14880 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T11:33:24.898+07:00  INFO 14880 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T11:33:24.898+07:00  INFO 14880 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T11:33:24.898+07:00  INFO 14880 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T11:33:24.899+07:00  INFO 14880 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T11:33:24.903+07:00  INFO 14880 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T11:33:24.905+07:00  INFO 14880 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T11:33:24.997+07:00  INFO 14880 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T11:33:25.085+07:00  INFO 14880 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T11:33:25.139+07:00  INFO 14880 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T11:33:25.628+07:00  WARN 14880 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T11:33:26.901+07:00  INFO 14880 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T11:33:27.552+07:00  WARN 14880 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T11:33:28.339+07:00  INFO 14880 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 8.142 seconds (process running for 9.131)
2025-08-04T11:37:04.839+07:00  INFO 14880 --- [http-nio-8000-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-04T11:37:05.184+07:00  WARN 14880 --- [http-nio-8000-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [AppException(errorCode=NOT_FOUND)]
2025-08-04T11:37:22.014+07:00  INFO 14880 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T11:37:22.064+07:00  INFO 14880 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T15:07:14.453+07:00  INFO 6300 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 6300 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T15:07:14.456+07:00  INFO 6300 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T15:07:16.470+07:00  INFO 6300 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T15:07:16.470+07:00  INFO 6300 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T15:07:16.541+07:00  INFO 6300 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T15:07:16.724+07:00  INFO 6300 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T15:07:16.956+07:00  INFO 6300 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@714af23f
2025-08-04T15:07:16.959+07:00  INFO 6300 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T15:07:17.224+07:00  INFO 6300 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T15:07:17.641+07:00  INFO 6300 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:07:17.682+07:00  INFO 6300 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T15:07:17.684+07:00  INFO 6300 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:07:17.693+07:00  INFO 6300 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T15:07:17.693+07:00  INFO 6300 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T15:07:17.693+07:00  INFO 6300 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T15:07:17.693+07:00  INFO 6300 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T15:07:17.693+07:00  INFO 6300 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T15:07:17.693+07:00  INFO 6300 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T15:07:17.695+07:00  INFO 6300 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T15:07:17.741+07:00  INFO 6300 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T15:07:17.743+07:00  INFO 6300 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T15:07:17.834+07:00  INFO 6300 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T15:07:17.940+07:00  INFO 6300 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T15:07:17.999+07:00  INFO 6300 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T15:07:18.543+07:00  WARN 6300 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T15:07:18.800+07:00 ERROR 6300 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: Basic collection has element type 'com.example.userservice.permisson.Permission' which is not a known basic type (attribute is not annotated '@ElementCollection', '@OneToMany', or '@ManyToMany')
2025-08-04T15:07:18.800+07:00  WARN 6300 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Basic collection has element type 'com.example.userservice.permisson.Permission' which is not a known basic type (attribute is not annotated '@ElementCollection', '@OneToMany', or '@ManyToMany')
2025-08-04T15:07:18.802+07:00  INFO 6300 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T15:07:18.806+07:00  INFO 6300 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T15:07:18.811+07:00  INFO 6300 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T15:07:18.851+07:00 ERROR 6300 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Basic collection has element type 'com.example.userservice.permisson.Permission' which is not a known basic type (attribute is not annotated '@ElementCollection', '@OneToMany', or '@ManyToMany')
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.hibernate.MappingException: Basic collection has element type 'com.example.userservice.permisson.Permission' which is not a known basic type (attribute is not annotated '@ElementCollection', '@OneToMany', or '@ManyToMany')
	at org.hibernate.type.descriptor.java.spi.BasicCollectionJavaType.getRecommendedJdbcType(BasicCollectionJavaType.java:72) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.boot.model.process.internal.InferredBasicValueResolver.from(InferredBasicValueResolver.java:195) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.mapping.BasicValue.resolution(BasicValue.java:647) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.mapping.BasicValue.buildResolution(BasicValue.java:498) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.mapping.BasicValue.resolve(BasicValue.java:350) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.mapping.BasicValue.resolve(BasicValue.java:340) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.lambda$processValueResolvers$4(InFlightMetadataCollectorImpl.java:1796) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at java.base/java.util.ArrayList.removeIf(ArrayList.java:1682) ~[na:na]
	at java.base/java.util.ArrayList.removeIf(ArrayList.java:1660) ~[na:na]
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processValueResolvers(InFlightMetadataCollectorImpl.java:1795) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1781) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:334) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1431) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1502) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.10.jar:6.1.10]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390) ~[spring-orm-6.1.10.jar:6.1.10]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.10.jar:6.1.10]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.10.jar:6.1.10]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366) ~[spring-orm-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 20 common frames omitted

2025-08-04T15:08:44.636+07:00  INFO 7852 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 7852 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T15:08:44.639+07:00  INFO 7852 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T15:08:46.951+07:00  INFO 7852 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T15:08:46.951+07:00  INFO 7852 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T15:08:47.024+07:00  INFO 7852 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T15:08:47.191+07:00  INFO 7852 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T15:08:47.517+07:00  INFO 7852 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@603cf7ed
2025-08-04T15:08:47.519+07:00  INFO 7852 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T15:08:47.745+07:00  INFO 7852 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T15:08:48.325+07:00  INFO 7852 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:08:48.371+07:00  INFO 7852 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T15:08:48.374+07:00  INFO 7852 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:08:48.395+07:00  INFO 7852 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T15:08:48.395+07:00  INFO 7852 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T15:08:48.395+07:00  INFO 7852 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T15:08:48.395+07:00  INFO 7852 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T15:08:48.395+07:00  INFO 7852 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T15:08:48.396+07:00  INFO 7852 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T15:08:48.397+07:00  INFO 7852 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T15:08:48.455+07:00  INFO 7852 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T15:08:48.459+07:00  INFO 7852 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T15:08:48.595+07:00  INFO 7852 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T15:08:48.693+07:00  INFO 7852 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T15:08:48.743+07:00  INFO 7852 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T15:08:49.319+07:00  WARN 7852 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T15:08:49.618+07:00 ERROR 7852 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: Basic collection has element type 'com.example.userservice.permisson.Permission' which is not a known basic type (attribute is not annotated '@ElementCollection', '@OneToMany', or '@ManyToMany')
2025-08-04T15:08:49.619+07:00  WARN 7852 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Basic collection has element type 'com.example.userservice.permisson.Permission' which is not a known basic type (attribute is not annotated '@ElementCollection', '@OneToMany', or '@ManyToMany')
2025-08-04T15:08:49.621+07:00  INFO 7852 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T15:08:49.625+07:00  INFO 7852 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T15:08:49.630+07:00  INFO 7852 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T15:08:49.670+07:00 ERROR 7852 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Basic collection has element type 'com.example.userservice.permisson.Permission' which is not a known basic type (attribute is not annotated '@ElementCollection', '@OneToMany', or '@ManyToMany')
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.hibernate.MappingException: Basic collection has element type 'com.example.userservice.permisson.Permission' which is not a known basic type (attribute is not annotated '@ElementCollection', '@OneToMany', or '@ManyToMany')
	at org.hibernate.type.descriptor.java.spi.BasicCollectionJavaType.getRecommendedJdbcType(BasicCollectionJavaType.java:72) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.boot.model.process.internal.InferredBasicValueResolver.from(InferredBasicValueResolver.java:195) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.mapping.BasicValue.resolution(BasicValue.java:647) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.mapping.BasicValue.buildResolution(BasicValue.java:498) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.mapping.BasicValue.resolve(BasicValue.java:350) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.mapping.BasicValue.resolve(BasicValue.java:340) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.lambda$processValueResolvers$4(InFlightMetadataCollectorImpl.java:1796) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at java.base/java.util.ArrayList.removeIf(ArrayList.java:1682) ~[na:na]
	at java.base/java.util.ArrayList.removeIf(ArrayList.java:1660) ~[na:na]
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processValueResolvers(InFlightMetadataCollectorImpl.java:1795) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1781) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:334) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1431) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1502) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.10.jar:6.1.10]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390) ~[spring-orm-6.1.10.jar:6.1.10]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.10.jar:6.1.10]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.10.jar:6.1.10]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366) ~[spring-orm-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 20 common frames omitted

2025-08-04T15:10:23.753+07:00  INFO 2296 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 2296 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T15:10:23.756+07:00  INFO 2296 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T15:10:25.706+07:00  INFO 2296 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T15:10:25.707+07:00  INFO 2296 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T15:10:25.796+07:00  INFO 2296 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T15:10:25.993+07:00  INFO 2296 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T15:10:26.214+07:00  INFO 2296 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@3966523
2025-08-04T15:10:26.223+07:00  INFO 2296 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T15:10:26.461+07:00  INFO 2296 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T15:10:26.881+07:00  INFO 2296 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:10:26.913+07:00  INFO 2296 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T15:10:26.916+07:00  INFO 2296 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:10:26.931+07:00  INFO 2296 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T15:10:26.932+07:00  INFO 2296 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T15:10:26.932+07:00  INFO 2296 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T15:10:26.932+07:00  INFO 2296 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T15:10:26.932+07:00  INFO 2296 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T15:10:26.932+07:00  INFO 2296 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T15:10:26.933+07:00  INFO 2296 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T15:10:26.970+07:00  INFO 2296 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T15:10:26.972+07:00  INFO 2296 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T15:10:27.063+07:00  INFO 2296 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T15:10:27.156+07:00  INFO 2296 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T15:10:27.210+07:00  INFO 2296 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T15:10:27.731+07:00  WARN 2296 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T15:10:27.995+07:00 ERROR 2296 --- [restartedMain] j.LocalContainerEntityManagerFactoryBean : Failed to initialize JPA EntityManagerFactory: Basic collection has element type 'com.example.userservice.permisson.Permission' which is not a known basic type (attribute is not annotated '@ElementCollection', '@OneToMany', or '@ManyToMany')
2025-08-04T15:10:27.996+07:00  WARN 2296 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Basic collection has element type 'com.example.userservice.permisson.Permission' which is not a known basic type (attribute is not annotated '@ElementCollection', '@OneToMany', or '@ManyToMany')
2025-08-04T15:10:27.998+07:00  INFO 2296 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T15:10:28.003+07:00  INFO 2296 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T15:10:28.008+07:00  INFO 2296 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T15:10:28.048+07:00 ERROR 2296 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory' defined in class path resource [org/springframework/boot/autoconfigure/orm/jpa/HibernateJpaConfiguration.class]: Basic collection has element type 'com.example.userservice.permisson.Permission' which is not a known basic type (attribute is not annotated '@ElementCollection', '@OneToMany', or '@ManyToMany')
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1788) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:952) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.hibernate.MappingException: Basic collection has element type 'com.example.userservice.permisson.Permission' which is not a known basic type (attribute is not annotated '@ElementCollection', '@OneToMany', or '@ManyToMany')
	at org.hibernate.type.descriptor.java.spi.BasicCollectionJavaType.getRecommendedJdbcType(BasicCollectionJavaType.java:72) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.boot.model.process.internal.InferredBasicValueResolver.from(InferredBasicValueResolver.java:195) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.mapping.BasicValue.resolution(BasicValue.java:647) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.mapping.BasicValue.buildResolution(BasicValue.java:498) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.mapping.BasicValue.resolve(BasicValue.java:350) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.mapping.BasicValue.resolve(BasicValue.java:340) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.lambda$processValueResolvers$4(InFlightMetadataCollectorImpl.java:1796) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at java.base/java.util.ArrayList.removeIf(ArrayList.java:1682) ~[na:na]
	at java.base/java.util.ArrayList.removeIf(ArrayList.java:1660) ~[na:na]
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processValueResolvers(InFlightMetadataCollectorImpl.java:1795) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.boot.internal.InFlightMetadataCollectorImpl.processSecondPasses(InFlightMetadataCollectorImpl.java:1781) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.boot.model.process.spi.MetadataBuildingProcess.complete(MetadataBuildingProcess.java:334) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.metadata(EntityManagerFactoryBuilderImpl.java:1431) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.hibernate.jpa.boot.internal.EntityManagerFactoryBuilderImpl.build(EntityManagerFactoryBuilderImpl.java:1502) ~[hibernate-core-6.5.2.Final.jar:6.5.2.Final]
	at org.springframework.orm.jpa.vendor.SpringHibernateJpaPersistenceProvider.createContainerEntityManagerFactory(SpringHibernateJpaPersistenceProvider.java:75) ~[spring-orm-6.1.10.jar:6.1.10]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.createNativeEntityManagerFactory(LocalContainerEntityManagerFactoryBean.java:390) ~[spring-orm-6.1.10.jar:6.1.10]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.buildNativeEntityManagerFactory(AbstractEntityManagerFactoryBean.java:409) ~[spring-orm-6.1.10.jar:6.1.10]
	at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.afterPropertiesSet(AbstractEntityManagerFactoryBean.java:396) ~[spring-orm-6.1.10.jar:6.1.10]
	at org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean.afterPropertiesSet(LocalContainerEntityManagerFactoryBean.java:366) ~[spring-orm-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1835) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1784) ~[spring-beans-6.1.10.jar:6.1.10]
	... 20 common frames omitted

2025-08-04T15:11:57.405+07:00  INFO 15440 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 15440 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T15:11:57.408+07:00  INFO 15440 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T15:11:59.377+07:00  INFO 15440 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T15:11:59.377+07:00  INFO 15440 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T15:11:59.440+07:00  INFO 15440 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T15:11:59.613+07:00  INFO 15440 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T15:11:59.836+07:00  INFO 15440 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@63ea8f8d
2025-08-04T15:11:59.838+07:00  INFO 15440 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T15:12:00.050+07:00  INFO 15440 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T15:12:00.465+07:00  INFO 15440 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:12:00.495+07:00  INFO 15440 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T15:12:00.498+07:00  INFO 15440 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:12:00.505+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T15:12:00.505+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T15:12:00.505+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T15:12:00.506+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T15:12:00.506+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T15:12:00.506+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T15:12:00.508+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T15:12:00.544+07:00  INFO 15440 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T15:12:00.546+07:00  INFO 15440 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T15:12:00.639+07:00  INFO 15440 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T15:12:00.744+07:00  INFO 15440 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T15:12:00.802+07:00  INFO 15440 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T15:12:01.339+07:00  WARN 15440 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T15:12:02.844+07:00  INFO 15440 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T15:12:03.468+07:00  WARN 15440 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T15:12:04.208+07:00  INFO 15440 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 7.478 seconds (process running for 8.834)
2025-08-04T15:12:14.084+07:00  INFO 15440 --- [http-nio-8000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-04T15:12:14.474+07:00  WARN 15440 --- [http-nio-8000-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [AppException(errorCode=NOT_FOUND)]
2025-08-04T15:12:27.325+07:00  WARN 15440 --- [http-nio-8000-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [AppException(errorCode=NOT_FOUND)]
2025-08-04T15:12:56.343+07:00  WARN 15440 --- [http-nio-8000-exec-6] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [AppException(errorCode=NOT_FOUND)]
2025-08-04T15:16:46.680+07:00  INFO 15440 --- [Thread-5] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T15:16:46.688+07:00  INFO 15440 --- [Thread-5] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T15:16:46.896+07:00  INFO 15440 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 15440 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T15:16:46.896+07:00  INFO 15440 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T15:16:48.181+07:00  INFO 15440 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T15:16:48.182+07:00  INFO 15440 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T15:16:48.239+07:00  INFO 15440 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T15:16:48.344+07:00  INFO 15440 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-08-04T15:16:48.659+07:00  INFO 15440 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection org.postgresql.jdbc.PgConnection@3746c969
2025-08-04T15:16:48.660+07:00  INFO 15440 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-08-04T15:16:48.703+07:00  INFO 15440 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T15:16:48.807+07:00  INFO 15440 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:16:48.829+07:00  INFO 15440 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T15:16:48.831+07:00  INFO 15440 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:16:48.835+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T15:16:48.835+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T15:16:48.836+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T15:16:48.836+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T15:16:48.836+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T15:16:48.836+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T15:16:48.836+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T15:16:48.846+07:00  INFO 15440 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T15:16:48.848+07:00  INFO 15440 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T15:16:48.897+07:00  INFO 15440 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T15:16:48.910+07:00  INFO 15440 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T15:16:48.952+07:00  WARN 15440 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T15:16:49.344+07:00  INFO 15440 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T15:16:49.493+07:00  WARN 15440 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'permissionController': Injection of resource dependencies failed
2025-08-04T15:16:49.495+07:00  INFO 15440 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-08-04T15:16:49.591+07:00  INFO 15440 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-08-04T15:16:49.592+07:00  INFO 15440 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T15:16:49.665+07:00 ERROR 15440 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

A component required a bean of type 'com.example.userservice.permisson.PermissionService' that could not be found.


Action:

Consider defining a bean of type 'com.example.userservice.permisson.PermissionService' in your configuration.

2025-08-04T15:16:51.167+07:00  INFO 15440 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 15440 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T15:16:51.168+07:00  INFO 15440 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T15:16:51.827+07:00  INFO 15440 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T15:16:51.827+07:00  INFO 15440 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T15:16:51.865+07:00  INFO 15440 --- [restartedMain] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2025-08-04T15:16:51.935+07:00  INFO 15440 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-08-04T15:16:52.139+07:00  INFO 15440 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection org.postgresql.jdbc.PgConnection@4d9fdac9
2025-08-04T15:16:52.140+07:00  INFO 15440 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-08-04T15:16:52.168+07:00  INFO 15440 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T15:16:52.231+07:00  INFO 15440 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:16:52.246+07:00  INFO 15440 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T15:16:52.248+07:00  INFO 15440 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:16:52.251+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T15:16:52.251+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T15:16:52.251+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T15:16:52.251+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T15:16:52.251+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T15:16:52.251+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T15:16:52.252+07:00  INFO 15440 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T15:16:52.257+07:00  INFO 15440 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T15:16:52.257+07:00  INFO 15440 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T15:16:52.297+07:00  INFO 15440 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T15:16:52.309+07:00  INFO 15440 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T15:16:52.333+07:00  WARN 15440 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T15:16:52.530+07:00  INFO 15440 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T15:16:52.744+07:00  WARN 15440 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T15:16:53.209+07:00  INFO 15440 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 2.091 seconds (process running for 297.834)
2025-08-04T15:17:00.248+07:00  INFO 15440 --- [http-nio-8000-exec-4] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-04T15:18:53.754+07:00  INFO 15440 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-08-04T15:18:53.773+07:00  INFO 15440 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-08-04T15:25:33.127+07:00  INFO 18012 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 18012 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T15:25:33.130+07:00  INFO 18012 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T15:25:36.311+07:00  INFO 18012 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T15:25:36.312+07:00  INFO 18012 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T15:25:36.408+07:00  INFO 18012 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T15:25:36.628+07:00  INFO 18012 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T15:25:36.990+07:00  INFO 18012 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@4d4cf721
2025-08-04T15:25:36.993+07:00  INFO 18012 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T15:25:37.624+07:00  INFO 18012 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T15:25:38.808+07:00  INFO 18012 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:25:38.868+07:00  INFO 18012 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T15:25:38.872+07:00  INFO 18012 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:25:38.886+07:00  INFO 18012 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T15:25:38.887+07:00  INFO 18012 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T15:25:38.887+07:00  INFO 18012 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T15:25:38.887+07:00  INFO 18012 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T15:25:38.887+07:00  INFO 18012 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T15:25:38.887+07:00  INFO 18012 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T15:25:38.890+07:00  INFO 18012 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T15:25:38.940+07:00  INFO 18012 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T15:25:38.944+07:00  INFO 18012 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T15:25:39.115+07:00  INFO 18012 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T15:25:39.271+07:00  INFO 18012 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T15:25:39.353+07:00  INFO 18012 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T15:25:40.161+07:00  WARN 18012 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T15:25:43.400+07:00  INFO 18012 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T15:25:44.781+07:00  WARN 18012 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T15:25:45.918+07:00  INFO 18012 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 13.477 seconds (process running for 14.746)
2025-08-04T15:25:46.897+07:00  INFO 18012 --- [http-nio-8000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-04T15:26:37.294+07:00  INFO 18012 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T15:26:37.299+07:00  INFO 18012 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T15:26:42.304+07:00  INFO 2844 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 2844 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T15:26:42.307+07:00  INFO 2844 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T15:26:44.224+07:00  INFO 2844 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T15:26:44.225+07:00  INFO 2844 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T15:26:44.295+07:00  INFO 2844 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T15:26:44.492+07:00  INFO 2844 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T15:26:44.845+07:00  INFO 2844 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@5020803f
2025-08-04T15:26:44.846+07:00  INFO 2844 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T15:26:45.117+07:00  INFO 2844 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T15:26:45.667+07:00  INFO 2844 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:26:45.700+07:00  INFO 2844 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T15:26:45.702+07:00  INFO 2844 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:26:45.710+07:00  INFO 2844 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T15:26:45.710+07:00  INFO 2844 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T15:26:45.711+07:00  INFO 2844 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T15:26:45.711+07:00  INFO 2844 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T15:26:45.711+07:00  INFO 2844 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T15:26:45.711+07:00  INFO 2844 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T15:26:45.712+07:00  INFO 2844 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T15:26:45.741+07:00  INFO 2844 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T15:26:45.743+07:00  INFO 2844 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T15:26:45.844+07:00  INFO 2844 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T15:26:45.956+07:00  INFO 2844 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T15:26:46.014+07:00  INFO 2844 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T15:26:46.538+07:00  WARN 2844 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T15:26:47.899+07:00  INFO 2844 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T15:26:48.607+07:00  WARN 2844 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T15:26:48.931+07:00  WARN 2844 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'filterChain' defined in class path resource [com/example/userservice/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'filterChain' threw exception with message: Pattern cannot be null or empty
2025-08-04T15:26:48.937+07:00  INFO 2844 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T15:26:48.943+07:00  INFO 2844 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T15:26:48.947+07:00  INFO 2844 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T15:26:48.986+07:00 ERROR 2844 --- [restartedMain] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': Unsatisfied dependency expressed through method 'setFilterChains' parameter 0: Error creating bean with name 'filterChain' defined in class path resource [com/example/userservice/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'filterChain' threw exception with message: Pattern cannot be null or empty
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:895) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:848) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:145) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:508) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1421) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:975) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:962) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:624) ~[spring-context-6.1.10.jar:6.1.10]
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:754) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:456) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:335) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1363) ~[spring-boot-3.3.1.jar:3.3.1]
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1352) ~[spring-boot-3.3.1.jar:3.3.1]
	at com.example.userservice.UserServiceApplication.main(UserServiceApplication.java:10) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50) ~[spring-boot-devtools-3.3.1.jar:3.3.1]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'filterChain' defined in class path resource [com/example/userservice/config/SecurityConfig.class]: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'filterChain' threw exception with message: Pattern cannot be null or empty
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:648) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:636) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1167) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:337) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:335) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1689) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1653) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeanCollection(DefaultListableBeanFactory.java:1543) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1511) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1392) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1353) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.resolveMethodArguments(AutowiredAnnotationBeanPostProcessor.java:887) ~[spring-beans-6.1.10.jar:6.1.10]
	... 25 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: Factory method 'filterChain' threw exception with message: Pattern cannot be null or empty
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:177) ~[spring-beans-6.1.10.jar:6.1.10]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:644) ~[spring-beans-6.1.10.jar:6.1.10]
	... 42 common frames omitted
Caused by: java.lang.IllegalArgumentException: Pattern cannot be null or empty
	at org.springframework.util.Assert.hasText(Assert.java:240) ~[spring-core-6.1.10.jar:6.1.10]
	at org.springframework.security.web.util.matcher.AntPathRequestMatcher.<init>(AntPathRequestMatcher.java:151) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.util.matcher.AntPathRequestMatcher.<init>(AntPathRequestMatcher.java:136) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.util.matcher.AntPathRequestMatcher.<init>(AntPathRequestMatcher.java:124) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.requestMatchers(AbstractRequestMatcherRegistry.java:211) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.requestMatchers(AbstractRequestMatcherRegistry.java:350) ~[spring-security-config-6.3.1.jar:6.3.1]
	at com.example.userservice.config.SecurityConfig.lambda$filterChain$0(SecurityConfig.java:34) ~[main/:na]
	at org.springframework.security.config.annotation.web.builders.HttpSecurity.authorizeHttpRequests(HttpSecurity.java:1467) ~[spring-security-config-6.3.1.jar:6.3.1]
	at com.example.userservice.config.SecurityConfig.filterChain(SecurityConfig.java:33) ~[main/:na]
	at com.example.userservice.config.SecurityConfig$$SpringCGLIB$$0.CGLIB$filterChain$0(<generated>) ~[main/:na]
	at com.example.userservice.config.SecurityConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>) ~[main/:na]
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258) ~[spring-core-6.1.10.jar:6.1.10]
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:348) ~[spring-context-6.1.10.jar:6.1.10]
	at com.example.userservice.config.SecurityConfig$$SpringCGLIB$$0.filterChain(<generated>) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:140) ~[spring-beans-6.1.10.jar:6.1.10]
	... 43 common frames omitted

2025-08-04T15:27:07.352+07:00  INFO 8132 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 8132 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T15:27:07.355+07:00  INFO 8132 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T15:27:09.270+07:00  INFO 8132 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T15:27:09.270+07:00  INFO 8132 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T15:27:09.338+07:00  INFO 8132 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T15:27:09.504+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T15:27:09.730+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@21a0e1e
2025-08-04T15:27:09.732+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T15:27:09.949+07:00  INFO 8132 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T15:27:10.458+07:00  INFO 8132 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:27:10.497+07:00  INFO 8132 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T15:27:10.500+07:00  INFO 8132 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:27:10.509+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T15:27:10.509+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T15:27:10.509+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T15:27:10.509+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T15:27:10.509+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T15:27:10.510+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T15:27:10.511+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T15:27:10.555+07:00  INFO 8132 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T15:27:10.557+07:00  INFO 8132 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T15:27:10.666+07:00  INFO 8132 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T15:27:10.786+07:00  INFO 8132 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T15:27:10.856+07:00  INFO 8132 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T15:27:11.421+07:00  WARN 8132 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T15:27:12.702+07:00  INFO 8132 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T15:27:13.296+07:00  WARN 8132 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T15:27:14.001+07:00  INFO 8132 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 7.28 seconds (process running for 8.397)
2025-08-04T15:27:17.428+07:00  INFO 8132 --- [http-nio-8000-exec-3] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-04T15:28:16.469+07:00  INFO 8132 --- [Thread-5] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T15:28:16.484+07:00  INFO 8132 --- [Thread-5] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T15:28:16.673+07:00  INFO 8132 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 8132 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T15:28:16.674+07:00  INFO 8132 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T15:28:17.322+07:00  INFO 8132 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T15:28:17.323+07:00  INFO 8132 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T15:28:17.350+07:00  INFO 8132 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T15:28:17.404+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-08-04T15:28:17.471+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection org.postgresql.jdbc.PgConnection@290654be
2025-08-04T15:28:17.472+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-08-04T15:28:17.499+07:00  INFO 8132 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T15:28:17.583+07:00  INFO 8132 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:28:17.602+07:00  INFO 8132 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T15:28:17.603+07:00  INFO 8132 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:28:17.607+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T15:28:17.608+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T15:28:17.608+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T15:28:17.608+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T15:28:17.608+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T15:28:17.608+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T15:28:17.608+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T15:28:17.614+07:00  INFO 8132 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T15:28:17.615+07:00  INFO 8132 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T15:28:17.660+07:00  INFO 8132 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T15:28:17.666+07:00  INFO 8132 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T15:28:17.687+07:00  WARN 8132 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T15:28:17.973+07:00  INFO 8132 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T15:28:18.267+07:00  WARN 8132 --- [restartedMain] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userController': Injection of resource dependencies failed
2025-08-04T15:28:18.268+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-08-04T15:28:18.385+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-08-04T15:28:18.386+07:00  INFO 8132 --- [restartedMain] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2025-08-04T15:28:18.440+07:00 ERROR 8132 --- [restartedMain] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

A component required a bean of type 'com.example.userservice.services.UserService' that could not be found.


Action:

Consider defining a bean of type 'com.example.userservice.services.UserService' in your configuration.

2025-08-04T15:28:20.139+07:00  INFO 8132 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 8132 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T15:28:20.139+07:00  INFO 8132 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T15:28:20.602+07:00  INFO 8132 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T15:28:20.603+07:00  INFO 8132 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T15:28:20.627+07:00  INFO 8132 --- [restartedMain] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2025-08-04T15:28:20.671+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-08-04T15:28:20.741+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection org.postgresql.jdbc.PgConnection@4a0ddc6e
2025-08-04T15:28:20.741+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-08-04T15:28:20.760+07:00  INFO 8132 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T15:28:20.807+07:00  INFO 8132 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:28:20.818+07:00  INFO 8132 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T15:28:20.819+07:00  INFO 8132 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:28:20.821+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T15:28:20.821+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T15:28:20.821+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T15:28:20.821+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T15:28:20.822+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T15:28:20.822+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T15:28:20.822+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T15:28:20.827+07:00  INFO 8132 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T15:28:20.827+07:00  INFO 8132 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T15:28:20.845+07:00  INFO 8132 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T15:28:20.848+07:00  INFO 8132 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T15:28:20.863+07:00  WARN 8132 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T15:28:21.008+07:00  INFO 8132 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T15:28:21.137+07:00  WARN 8132 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T15:28:21.308+07:00  INFO 8132 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 1.226 seconds (process running for 75.704)
2025-08-04T15:35:34.974+07:00  INFO 8132 --- [Thread-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-08-04T15:35:34.979+07:00  INFO 8132 --- [Thread-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-08-04T15:35:35.109+07:00  INFO 8132 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 8132 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T15:35:35.109+07:00  INFO 8132 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T15:35:35.694+07:00  INFO 8132 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T15:35:35.694+07:00  INFO 8132 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T15:35:35.728+07:00  INFO 8132 --- [restartedMain] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2025-08-04T15:35:35.786+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2025-08-04T15:35:35.881+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-4 - Added connection org.postgresql.jdbc.PgConnection@68a5e284
2025-08-04T15:35:35.881+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2025-08-04T15:35:35.907+07:00  INFO 8132 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T15:35:35.969+07:00  INFO 8132 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:35:35.981+07:00  INFO 8132 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T15:35:35.982+07:00  INFO 8132 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:35:35.985+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T15:35:35.985+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T15:35:35.985+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T15:35:35.985+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T15:35:35.985+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T15:35:35.985+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T15:35:35.985+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T15:35:35.991+07:00  INFO 8132 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T15:35:35.992+07:00  INFO 8132 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T15:35:36.059+07:00  INFO 8132 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T15:35:36.066+07:00  INFO 8132 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T15:35:36.095+07:00  WARN 8132 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T15:35:36.251+07:00  INFO 8132 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T15:35:36.406+07:00  WARN 8132 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T15:35:36.623+07:00  INFO 8132 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 1.55 seconds (process running for 511.02)
2025-08-04T15:35:38.759+07:00  INFO 8132 --- [Thread-14] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown initiated...
2025-08-04T15:35:38.762+07:00  INFO 8132 --- [Thread-14] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown completed.
2025-08-04T15:35:38.862+07:00  INFO 8132 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 8132 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T15:35:38.863+07:00  INFO 8132 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T15:35:39.234+07:00  INFO 8132 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T15:35:39.234+07:00  INFO 8132 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T15:35:39.259+07:00  INFO 8132 --- [restartedMain] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring embedded WebApplicationContext
2025-08-04T15:35:39.292+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Starting...
2025-08-04T15:35:39.471+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-5 - Added connection org.postgresql.jdbc.PgConnection@2dd130d2
2025-08-04T15:35:39.472+07:00  INFO 8132 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Start completed.
2025-08-04T15:35:39.490+07:00  INFO 8132 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T15:35:39.530+07:00  INFO 8132 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:35:39.542+07:00  INFO 8132 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T15:35:39.543+07:00  INFO 8132 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T15:35:39.545+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T15:35:39.545+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T15:35:39.545+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T15:35:39.545+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T15:35:39.545+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T15:35:39.545+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T15:35:39.545+07:00  INFO 8132 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T15:35:39.549+07:00  INFO 8132 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T15:35:39.550+07:00  INFO 8132 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T15:35:39.566+07:00  INFO 8132 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T15:35:39.570+07:00  INFO 8132 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T15:35:39.581+07:00  WARN 8132 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T15:35:39.682+07:00  INFO 8132 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T15:35:39.831+07:00  WARN 8132 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T15:35:39.987+07:00  INFO 8132 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 1.152 seconds (process running for 514.384)
2025-08-04T15:36:10.936+07:00  INFO 8132 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown initiated...
2025-08-04T15:36:10.947+07:00  INFO 8132 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown completed.
2025-08-04T16:00:52.971+07:00  INFO 296 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 296 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T16:00:52.976+07:00  INFO 296 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T16:00:55.881+07:00  INFO 296 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T16:00:55.882+07:00  INFO 296 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T16:00:56.008+07:00  INFO 296 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T16:00:56.299+07:00  INFO 296 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T16:00:56.638+07:00  INFO 296 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@74cbc615
2025-08-04T16:00:56.641+07:00  INFO 296 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T16:00:56.926+07:00  INFO 296 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T16:00:57.445+07:00  INFO 296 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:00:57.481+07:00  INFO 296 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T16:00:57.483+07:00  INFO 296 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:00:57.492+07:00  INFO 296 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T16:00:57.492+07:00  INFO 296 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T16:00:57.492+07:00  INFO 296 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T16:00:57.492+07:00  INFO 296 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T16:00:57.492+07:00  INFO 296 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T16:00:57.492+07:00  INFO 296 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T16:00:57.494+07:00  INFO 296 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T16:00:57.538+07:00  INFO 296 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T16:00:57.540+07:00  INFO 296 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T16:00:57.636+07:00  INFO 296 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T16:00:57.765+07:00  INFO 296 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T16:00:57.832+07:00  INFO 296 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T16:00:58.465+07:00  WARN 296 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T16:01:00.190+07:00  INFO 296 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T16:01:00.920+07:00  WARN 296 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T16:01:01.751+07:00  INFO 296 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 9.743 seconds (process running for 11.848)
2025-08-04T16:01:26.942+07:00  INFO 296 --- [http-nio-8000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-04T16:01:27.321+07:00  WARN 296 --- [http-nio-8000-exec-1] c.e.userservice.services.UserService     : error

com.example.userservice.exception.AppException: Người dùng đã tồn tại
	at com.example.userservice.services.UserService.createUser(UserService.java:46) ~[main/:na]
	at com.example.userservice.controller.UserController.createUser(UserController.java:26) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.25.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.25.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:128) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.10.jar:6.1.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-08-04T16:01:27.375+07:00  WARN 296 --- [http-nio-8000-exec-1] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [AppException(errorCode=INTERNAL_SERVER_ERROR)]
2025-08-04T16:01:34.277+07:00  WARN 296 --- [http-nio-8000-exec-4] c.e.userservice.services.UserService     : error

com.example.userservice.exception.AppException: Người dùng đã tồn tại
	at com.example.userservice.services.UserService.createUser(UserService.java:46) ~[main/:na]
	at com.example.userservice.controller.UserController.createUser(UserController.java:26) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.25.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.25.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:128) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.10.jar:6.1.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-08-04T16:01:34.281+07:00  WARN 296 --- [http-nio-8000-exec-4] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [AppException(errorCode=INTERNAL_SERVER_ERROR)]
2025-08-04T16:02:12.505+07:00  INFO 296 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T16:02:12.518+07:00  INFO 296 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T16:02:20.607+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 13960 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T16:02:20.611+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T16:02:22.539+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T16:02:22.540+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T16:02:22.604+07:00  INFO 13960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T16:02:22.769+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T16:02:22.982+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@24ed4bd0
2025-08-04T16:02:22.984+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T16:02:23.201+07:00  INFO 13960 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T16:02:23.613+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:02:23.640+07:00  INFO 13960 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T16:02:23.642+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:02:23.653+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T16:02:23.653+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T16:02:23.653+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T16:02:23.654+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T16:02:23.654+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T16:02:23.654+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T16:02:23.656+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T16:02:23.691+07:00  INFO 13960 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T16:02:23.694+07:00  INFO 13960 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T16:02:23.811+07:00  INFO 13960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T16:02:23.942+07:00  INFO 13960 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T16:02:23.991+07:00  INFO 13960 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T16:02:24.474+07:00  WARN 13960 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T16:02:26.455+07:00  INFO 13960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T16:02:27.330+07:00  WARN 13960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T16:02:28.373+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 8.557 seconds (process running for 10.003)
2025-08-04T16:02:28.864+07:00  INFO 13960 --- [http-nio-8000-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-04T16:02:54.060+07:00  WARN 13960 --- [http-nio-8000-exec-3] c.e.userservice.services.UserService     : error

com.example.userservice.exception.AppException: Người dùng đã tồn tại
	at com.example.userservice.services.UserService.createUser(UserService.java:46) ~[main/:na]
	at com.example.userservice.controller.UserController.createUser(UserController.java:26) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.25.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.25.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:128) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.10.jar:6.1.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-08-04T16:02:54.087+07:00  WARN 13960 --- [http-nio-8000-exec-3] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [AppException(errorCode=INTERNAL_SERVER_ERROR)]
2025-08-04T16:03:07.967+07:00  WARN 13960 --- [http-nio-8000-exec-5] c.e.userservice.services.UserService     : error

com.example.userservice.exception.AppException: Không có dữ liệu để hiển thị
	at com.example.userservice.services.UserService.lambda$createUser$0(UserService.java:61) ~[main/:na]
	at java.base/java.util.Optional.orElseThrow(Optional.java:403) ~[na:na]
	at com.example.userservice.services.UserService.createUser(UserService.java:61) ~[main/:na]
	at com.example.userservice.controller.UserController.createUser(UserController.java:26) ~[main/:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]
	at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]
	at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]
	at java.base/java.lang.reflect.Method.invoke(Method.java:569) ~[na:na]
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:255) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:188) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:926) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:831) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590) ~[tomcat-embed-core-10.1.25.jar:6.0]
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658) ~[tomcat-embed-core-10.1.25.jar:6.0]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:128) ~[spring-security-oauth2-resource-server-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$3(HandlerMappingIntrospector.java:195) ~[spring-webmvc-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:230) ~[spring-security-config-6.3.1.jar:6.3.1]
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.10.jar:6.1.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.10.jar:6.1.10]
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.10.jar:6.1.10]
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:389) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:904) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1741) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1190) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63) ~[tomcat-embed-core-10.1.25.jar:10.1.25]
	at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]

2025-08-04T16:03:07.970+07:00  WARN 13960 --- [http-nio-8000-exec-5] .m.m.a.ExceptionHandlerExceptionResolver : Resolved [AppException(errorCode=INTERNAL_SERVER_ERROR)]
2025-08-04T16:11:11.141+07:00  INFO 13960 --- [Thread-5] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T16:11:11.152+07:00  INFO 13960 --- [Thread-5] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2025-08-04T16:11:11.415+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 13960 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T16:11:11.416+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T16:11:12.179+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T16:11:12.180+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T16:11:12.211+07:00  INFO 13960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T16:11:12.283+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Starting...
2025-08-04T16:11:12.391+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-2 - Added connection org.postgresql.jdbc.PgConnection@458f4fec
2025-08-04T16:11:12.392+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Start completed.
2025-08-04T16:11:12.428+07:00  INFO 13960 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T16:11:12.502+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:11:12.523+07:00  INFO 13960 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T16:11:12.525+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:11:12.531+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T16:11:12.531+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T16:11:12.532+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T16:11:12.532+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T16:11:12.532+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T16:11:12.532+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T16:11:12.535+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T16:11:12.542+07:00  INFO 13960 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T16:11:12.543+07:00  INFO 13960 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T16:11:12.688+07:00  INFO 13960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T16:11:12.728+07:00  INFO 13960 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T16:11:12.831+07:00  WARN 13960 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T16:11:13.576+07:00  INFO 13960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T16:11:13.768+07:00  WARN 13960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T16:11:13.986+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 2.654 seconds (process running for 535.616)
2025-08-04T16:11:15.703+07:00  INFO 13960 --- [Thread-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2025-08-04T16:11:15.707+07:00  INFO 13960 --- [Thread-7] com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2025-08-04T16:11:15.818+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 13960 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T16:11:15.819+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T16:11:16.200+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T16:11:16.200+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T16:11:16.225+07:00  INFO 13960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T16:11:16.256+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Starting...
2025-08-04T16:11:16.324+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-3 - Added connection org.postgresql.jdbc.PgConnection@6d946b92
2025-08-04T16:11:16.324+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Start completed.
2025-08-04T16:11:16.342+07:00  INFO 13960 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T16:11:16.384+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:11:16.394+07:00  INFO 13960 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T16:11:16.395+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:11:16.397+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T16:11:16.397+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T16:11:16.397+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T16:11:16.397+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T16:11:16.397+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T16:11:16.397+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T16:11:16.397+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T16:11:16.401+07:00  INFO 13960 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T16:11:16.401+07:00  INFO 13960 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T16:11:16.420+07:00  INFO 13960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T16:11:16.424+07:00  INFO 13960 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T16:11:16.437+07:00  WARN 13960 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T16:11:16.567+07:00  INFO 13960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T16:11:16.764+07:00  WARN 13960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T16:11:16.972+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 1.183 seconds (process running for 538.602)
2025-08-04T16:11:40.380+07:00  INFO 13960 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2025-08-04T16:11:40.385+07:00  INFO 13960 --- [Thread-11] com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2025-08-04T16:11:40.595+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 13960 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T16:11:40.595+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T16:11:41.970+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T16:11:41.970+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T16:11:42.021+07:00  INFO 13960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T16:11:42.456+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2025-08-04T16:11:43.155+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-4 - Added connection org.postgresql.jdbc.PgConnection@401d6650
2025-08-04T16:11:43.155+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2025-08-04T16:11:43.181+07:00  INFO 13960 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T16:11:43.231+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:11:43.243+07:00  INFO 13960 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T16:11:43.244+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:11:43.247+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T16:11:43.247+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T16:11:43.247+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T16:11:43.247+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T16:11:43.247+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T16:11:43.247+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T16:11:43.247+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T16:11:43.251+07:00  INFO 13960 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T16:11:43.252+07:00  INFO 13960 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T16:11:43.281+07:00  INFO 13960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T16:11:43.287+07:00  INFO 13960 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T16:11:43.308+07:00  WARN 13960 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T16:11:43.456+07:00  INFO 13960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T16:11:43.625+07:00  WARN 13960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T16:11:43.802+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 3.286 seconds (process running for 565.433)
2025-08-04T16:11:45.543+07:00  INFO 13960 --- [Thread-15] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown initiated...
2025-08-04T16:11:45.546+07:00  INFO 13960 --- [Thread-15] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown completed.
2025-08-04T16:11:45.735+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 13960 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T16:11:45.735+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T16:11:46.176+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T16:11:46.176+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T16:11:46.213+07:00  INFO 13960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T16:11:46.260+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Starting...
2025-08-04T16:11:46.342+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-5 - Added connection org.postgresql.jdbc.PgConnection@2f3e643
2025-08-04T16:11:46.342+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Start completed.
2025-08-04T16:11:46.365+07:00  INFO 13960 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T16:11:46.411+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:11:46.422+07:00  INFO 13960 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T16:11:46.423+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:11:46.425+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T16:11:46.425+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T16:11:46.426+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T16:11:46.426+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T16:11:46.426+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T16:11:46.426+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T16:11:46.426+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T16:11:46.431+07:00  INFO 13960 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T16:11:46.432+07:00  INFO 13960 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T16:11:46.459+07:00  INFO 13960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T16:11:46.465+07:00  INFO 13960 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T16:11:46.486+07:00  WARN 13960 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T16:11:46.629+07:00  INFO 13960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T16:11:46.776+07:00  WARN 13960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T16:11:46.972+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 1.279 seconds (process running for 568.602)
2025-08-04T16:12:00.124+07:00  INFO 13960 --- [Thread-19] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown initiated...
2025-08-04T16:12:00.127+07:00  INFO 13960 --- [Thread-19] com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown completed.
2025-08-04T16:12:00.255+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 13960 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T16:12:00.255+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T16:12:00.850+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T16:12:00.851+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T16:12:00.878+07:00  INFO 13960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T16:12:00.922+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Starting...
2025-08-04T16:12:01.094+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-6 - Added connection org.postgresql.jdbc.PgConnection@8796a7a
2025-08-04T16:12:01.094+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Start completed.
2025-08-04T16:12:01.114+07:00  INFO 13960 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T16:12:01.152+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:12:01.163+07:00  INFO 13960 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T16:12:01.164+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:12:01.166+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T16:12:01.166+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T16:12:01.166+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T16:12:01.166+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T16:12:01.166+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T16:12:01.166+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T16:12:01.166+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T16:12:01.170+07:00  INFO 13960 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T16:12:01.171+07:00  INFO 13960 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T16:12:01.189+07:00  INFO 13960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T16:12:01.193+07:00  INFO 13960 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T16:12:01.206+07:00  WARN 13960 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T16:12:01.322+07:00  INFO 13960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T16:12:01.467+07:00  WARN 13960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T16:12:01.638+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 1.413 seconds (process running for 583.269)
2025-08-04T16:12:03.467+07:00  INFO 13960 --- [Thread-23] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown initiated...
2025-08-04T16:12:03.469+07:00  INFO 13960 --- [Thread-23] com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown completed.
2025-08-04T16:12:03.576+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 13960 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T16:12:03.576+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T16:12:03.934+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T16:12:03.934+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T16:12:03.957+07:00  INFO 13960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T16:12:03.989+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Starting...
2025-08-04T16:12:04.163+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-7 - Added connection org.postgresql.jdbc.PgConnection@13380239
2025-08-04T16:12:04.163+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Start completed.
2025-08-04T16:12:04.181+07:00  INFO 13960 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T16:12:04.219+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:12:04.229+07:00  INFO 13960 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T16:12:04.230+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:12:04.232+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T16:12:04.232+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T16:12:04.232+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T16:12:04.232+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T16:12:04.233+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T16:12:04.233+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T16:12:04.233+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T16:12:04.237+07:00  INFO 13960 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T16:12:04.238+07:00  INFO 13960 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T16:12:04.256+07:00  INFO 13960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T16:12:04.262+07:00  INFO 13960 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T16:12:04.277+07:00  WARN 13960 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T16:12:04.372+07:00  INFO 13960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T16:12:04.531+07:00  WARN 13960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T16:12:04.704+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 1.153 seconds (process running for 586.335)
2025-08-04T16:12:53.900+07:00  INFO 13960 --- [Thread-27] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown initiated...
2025-08-04T16:12:53.908+07:00  INFO 13960 --- [Thread-27] com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown completed.
2025-08-04T16:12:54.002+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 13960 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T16:12:54.003+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T16:12:54.582+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T16:12:54.583+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T16:12:54.621+07:00  INFO 13960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T16:12:54.675+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Starting...
2025-08-04T16:12:54.775+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-8 - Added connection org.postgresql.jdbc.PgConnection@68016f3c
2025-08-04T16:12:54.776+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Start completed.
2025-08-04T16:12:54.803+07:00  INFO 13960 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T16:12:54.864+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:12:54.875+07:00  INFO 13960 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T16:12:54.877+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:12:54.879+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T16:12:54.879+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T16:12:54.879+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T16:12:54.879+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T16:12:54.879+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T16:12:54.879+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T16:12:54.879+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T16:12:54.884+07:00  INFO 13960 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T16:12:54.885+07:00  INFO 13960 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T16:12:54.918+07:00  INFO 13960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T16:12:54.926+07:00  INFO 13960 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T16:12:54.946+07:00  WARN 13960 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T16:12:55.061+07:00  INFO 13960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T16:12:55.220+07:00  WARN 13960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T16:12:55.403+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 1.432 seconds (process running for 637.033)
2025-08-04T16:12:57.114+07:00  INFO 13960 --- [Thread-31] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown initiated...
2025-08-04T16:12:57.117+07:00  INFO 13960 --- [Thread-31] com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown completed.
2025-08-04T16:12:57.224+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 13960 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T16:12:57.224+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T16:12:57.560+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T16:12:57.560+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T16:12:57.584+07:00  INFO 13960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T16:12:57.614+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Starting...
2025-08-04T16:12:57.681+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-9 - Added connection org.postgresql.jdbc.PgConnection@71edd714
2025-08-04T16:12:57.681+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Start completed.
2025-08-04T16:12:57.699+07:00  INFO 13960 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T16:12:57.739+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:12:57.750+07:00  INFO 13960 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T16:12:57.751+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:12:57.753+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T16:12:57.753+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T16:12:57.753+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T16:12:57.753+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T16:12:57.753+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T16:12:57.753+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T16:12:57.753+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T16:12:57.757+07:00  INFO 13960 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T16:12:57.758+07:00  INFO 13960 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T16:12:57.775+07:00  INFO 13960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T16:12:57.778+07:00  INFO 13960 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T16:12:57.788+07:00  WARN 13960 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T16:12:57.879+07:00  INFO 13960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T16:12:58.009+07:00  WARN 13960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T16:12:58.172+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 0.974 seconds (process running for 639.803)
2025-08-04T16:13:46.455+07:00  INFO 13960 --- [Thread-35] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown initiated...
2025-08-04T16:13:46.465+07:00  INFO 13960 --- [Thread-35] com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown completed.
2025-08-04T16:13:46.580+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 13960 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T16:13:46.581+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T16:13:46.994+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T16:13:46.994+07:00  INFO 13960 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T16:13:47.019+07:00  INFO 13960 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T16:13:47.096+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Starting...
2025-08-04T16:13:47.166+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-10 - Added connection org.postgresql.jdbc.PgConnection@565887c9
2025-08-04T16:13:47.166+07:00  INFO 13960 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Start completed.
2025-08-04T16:13:47.185+07:00  INFO 13960 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T16:13:47.226+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:13:47.236+07:00  INFO 13960 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T16:13:47.237+07:00  INFO 13960 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:13:47.239+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T16:13:47.239+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T16:13:47.239+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T16:13:47.239+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T16:13:47.239+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T16:13:47.239+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T16:13:47.239+07:00  INFO 13960 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T16:13:47.243+07:00  INFO 13960 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T16:13:47.243+07:00  INFO 13960 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T16:13:47.265+07:00  INFO 13960 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T16:13:47.270+07:00  INFO 13960 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T16:13:47.287+07:00  WARN 13960 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T16:13:47.370+07:00  INFO 13960 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T16:13:47.982+07:00  WARN 13960 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T16:13:48.171+07:00  INFO 13960 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 1.613 seconds (process running for 689.802)
2025-08-04T16:13:55.143+07:00  INFO 13960 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown initiated...
2025-08-04T16:13:55.145+07:00  INFO 13960 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown completed.
2025-08-04T16:14:20.227+07:00  INFO 7968 --- [restartedMain] c.e.userservice.UserServiceApplication   : Starting UserServiceApplication using Java 17.0.15 with PID 7968 (D:\Minh\project\ecommerce-platform\user-service\build\classes\java\main started by Minh in D:\Minh\project\ecommerce-platform\user-service)
2025-08-04T16:14:20.230+07:00  INFO 7968 --- [restartedMain] c.e.userservice.UserServiceApplication   : No active profile set, falling back to 1 default profile: "default"
2025-08-04T16:14:22.262+07:00  INFO 7968 --- [restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T16:14:22.263+07:00  INFO 7968 --- [restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.25]
2025-08-04T16:14:22.332+07:00  INFO 7968 --- [restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T16:14:22.514+07:00  INFO 7968 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2025-08-04T16:14:22.733+07:00  INFO 7968 --- [restartedMain] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection org.postgresql.jdbc.PgConnection@eab66f0
2025-08-04T16:14:22.735+07:00  INFO 7968 --- [restartedMain] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2025-08-04T16:14:22.953+07:00  INFO 7968 --- [restartedMain] liquibase.database                       : Set default schema name to public
2025-08-04T16:14:23.370+07:00  INFO 7968 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:14:23.407+07:00  INFO 7968 --- [restartedMain] liquibase.ui                             : Database is up to date, no changesets to execute
2025-08-04T16:14:23.410+07:00  INFO 7968 --- [restartedMain] liquibase.changelog                      : Reading from public.databasechangelog
2025-08-04T16:14:23.423+07:00  INFO 7968 --- [restartedMain] liquibase.util                           : UPDATE SUMMARY
2025-08-04T16:14:23.423+07:00  INFO 7968 --- [restartedMain] liquibase.util                           : Run:                          0
2025-08-04T16:14:23.423+07:00  INFO 7968 --- [restartedMain] liquibase.util                           : Previously run:               0
2025-08-04T16:14:23.423+07:00  INFO 7968 --- [restartedMain] liquibase.util                           : Filtered out:                 0
2025-08-04T16:14:23.423+07:00  INFO 7968 --- [restartedMain] liquibase.util                           : -------------------------------
2025-08-04T16:14:23.423+07:00  INFO 7968 --- [restartedMain] liquibase.util                           : Total change sets:            0
2025-08-04T16:14:23.425+07:00  INFO 7968 --- [restartedMain] liquibase.util                           : Update summary generated
2025-08-04T16:14:23.467+07:00  INFO 7968 --- [restartedMain] liquibase.lockservice                    : Successfully released change log lock
2025-08-04T16:14:23.469+07:00  INFO 7968 --- [restartedMain] liquibase.command                        : Command execution complete
2025-08-04T16:14:23.570+07:00  INFO 7968 --- [restartedMain] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [name: default]
2025-08-04T16:14:23.680+07:00  INFO 7968 --- [restartedMain] org.hibernate.Version                    : HHH000412: Hibernate ORM core version 6.5.2.Final
2025-08-04T16:14:23.734+07:00  INFO 7968 --- [restartedMain] o.h.c.internal.RegionFactoryInitiator    : HHH000026: Second-level cache disabled
2025-08-04T16:14:24.249+07:00  WARN 7968 --- [restartedMain] org.hibernate.orm.deprecation            : HHH90000025: PostgreSQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-08-04T16:14:25.564+07:00  INFO 7968 --- [restartedMain] o.h.e.t.j.p.i.JtaPlatformInitiator       : HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-08-04T16:14:26.144+07:00  WARN 7968 --- [restartedMain] JpaBaseConfiguration$JpaWebConfiguration : spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-08-04T16:14:26.854+07:00  INFO 7968 --- [restartedMain] c.e.userservice.UserServiceApplication   : Started UserServiceApplication in 7.251 seconds (process running for 8.568)
2025-08-04T16:15:11.157+07:00  INFO 7968 --- [http-nio-8000-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-04T16:21:57.024+07:00  INFO 7968 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2025-08-04T16:21:57.035+07:00  INFO 7968 --- [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
